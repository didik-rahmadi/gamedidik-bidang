<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seni Rupa - Mengenal Bidang</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Chewy&family=Nunito:wght@700&display=swap" rel="stylesheet">

    <style>
        /* --- RESET & BASIC SETUP --- */
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: #2C3E50;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; font-family: 'Fredoka', sans-serif;
            user-select: none; touch-action: none;
        }

        #game-container {
            width: 1920px; height: 1080px;
            /* Default Background (Cover) */
            background: url('assets/Background Cover.png') no-repeat center center;
            background-size: cover;
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            overflow: hidden; transform-origin: center center;
            transition: background 0.5s ease;
        }

        .hidden { display: none !important; }
        
        /* --- SHARED STYLES --- */
        .header-bar {
            position: absolute; top: 40px; left: 50%; transform: translateX(-50%);
            background: #FFF; padding: 15px 60px; border-radius: 50px;
            box-shadow: 0 10px 0 rgba(0,0,0,0.1); z-index: 10; text-align: center;
        }
        .page-title { font-family: 'Chewy', cursive; font-size: 3rem; color: #FF6F61; margin: 0; text-shadow: 2px 2px 0px #e0e0e0;}
        
        /* Tombol Navigasi Home (Muncul di setiap sub-page) */
        .btn-home {
            position: absolute; top: 40px; left: 40px;
            background: #FFD93D; color: #d35400;
            font-family: 'Chewy', cursive; font-size: 1.8rem;
            padding: 10px 30px; border-radius: 50px; border: 4px solid #fff;
            cursor: pointer; z-index: 50; box-shadow: 0 5px 0 rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }
        .btn-home:active { transform: translateY(5px); box-shadow: none; }

        .btn-nav {
            font-family: 'Chewy', cursive; font-size: 2rem; padding: 15px 40px;
            border: none; border-radius: 50px; cursor: pointer; transition: all 0.1s; z-index: 30;
            display: flex; align-items: center; gap: 10px;
        }
        .btn-nav:hover { transform: translateY(4px); filter: brightness(1.1); }
        .btn-nav:active { transform: translateY(8px); }

        /* Footer Logo (Posisi Tengah) */
        .footer-info {
            position: absolute; 
            bottom: 30px; 
            left: 50%; /* Pindah ke tengah layar */
            transform: translateX(-50%); /* Geser balik 50% agar presisi di tengah */
            
            display: flex; align-items: center; gap: 15px;
            font-size: 1.5rem; color: #FFF; font-weight: bold;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2); z-index: 40;
            background: rgba(0, 217, 255, 0.5); padding: 10px 40px; /* Padding sedikit dilebarkan */
            border-radius: 50px; backdrop-filter: blur(5px);
            border: 2px solid rgba(255,255,255,0.4);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .footer-logo { height: 50px; width: auto; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2)); }

        /* --- PAGE 1: COVER --- */
        #view-cover { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .hero-image {
            position: absolute; bottom: -50px; left: -50px; width: 58%;
            z-index: 20; transform-origin: bottom center; animation: sway-gentle 4s ease-in-out infinite;
            pointer-events: none; filter: drop-shadow(15px 0 25px rgba(0,0,0,0.2));
        }
        .content-wrapper {
            position: absolute; top: 0; right: 0; width: 55%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 30; padding-right: 50px;
        }
        .badge-class {
            background: #FFD93D; color: #d35400; font-family: 'Fredoka', sans-serif; font-weight: 600;
            font-size: 1.8rem; padding: 10px 30px; border-radius: 50px; border: 4px solid #FFF;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 10px; transform: rotate(-2deg);
        }
        .main-title {
            font-family: 'Chewy', cursive; font-size: 9rem; color: #FF6F61; line-height: 0.9;
            text-align: center; -webkit-text-stroke: 15px white; paint-order: stroke fill;
            filter: drop-shadow(5px 5px 0px rgba(0,0,0,0.1)); margin: 10px 0;
            animation: popIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .title-part-2 { color: #6CC5D6; display: block; font-size: 10rem; transform: rotate(-3deg); }
        .btn-start-cover {
            background: #FFD93D; color: #FFF; font-family: 'Chewy', cursive; font-size: 4.5rem;
            padding: 20px 120px; border: none; border-radius: 100px; cursor: pointer; margin-top: 30px;
            box-shadow: 0px 15px 0px #E6C229, 0px 25px 20px rgba(0,0,0,0.2), inset 0px 5px 0px rgba(255,255,255,0.5);
            text-shadow: 3px 3px 0px rgba(0,0,0,0.1); -webkit-text-stroke: 2px #d35400;
            transition: all 0.1s; animation: pulse-btn 2s infinite;
        }
        .btn-start-cover:hover { transform: translateY(5px); box-shadow: 0px 10px 0px #E6C229, 0px 20px 20px rgba(0,0,0,0.2); }
        .btn-start-cover:active { transform: translateY(15px); box-shadow: 0px 0px 0px #E6C229; }

        /* --- PAGE 2: MENU UTAMA (NEW) --- */
        #view-menu { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 Kolom */
            gap: 40px;
            width: 70%;
            margin-top: 50px;
        }
        /* Agar 2 tombol terakhir di tengah (Asesmen & Pengembang) */
        .menu-grid .centered-btn {
            grid-column: span 1; 
        }
        .menu-row-2 {
            display: flex; gap: 40px; justify-content: center; width: 100%; margin-top: 40px;
        }

        .btn-menu-main {
            background: rgba(255,255,255,0.9);
            border: 8px solid #fff;
            border-radius: 40px;
            height: 250px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            font-family: 'Chewy', cursive; font-size: 2.5rem; color: #555;
            text-decoration: none;
        }
        .btn-menu-main:hover { transform: scale(1.05) rotate(2deg); filter: brightness(1.1); }
        .btn-menu-main img { width: 100px; margin-bottom: 20px; }
        
        /* Warna Tombol Menu */
        .btn-tujuan { border-color: #e67e22; color: #d35400; } /* BARU: Oranye */
        .btn-materi { border-color: #3498db; color: #3498db; }
        .btn-video { border-color: #e74c3c; color: #e74c3c; }
        .btn-games { border-color: #2ecc71; color: #2ecc71; }
        .btn-asesmen { border-color: #9b59b6; color: #9b59b6; }
        .btn-dev { border-color: #f1c40f; color: #f39c12; }

        /* --- SUB PAGES --- */
        
        /* MATERI */
        #view-materi { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .materi-container {
            position: absolute; top: 55%; left: 50%; transform: translate(-50%, -50%);
            display: flex; gap: 80px; width: 80%; justify-content: center;
        }
        .materi-card {
            background: rgba(255,255,255,0.9); padding: 30px; border-radius: 40px;
            width: 500px; text-align: center; border: 8px solid #fff;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2); transition: transform 0.3s;
        }
        .materi-card:hover { transform: scale(1.05) rotate(1deg); }
        .card-beraturan { border-color: #6CC5D6; }
        .card-tak-beraturan { border-color: #FF6F61; }
        .materi-img {
            width: 100%; height: 350px; object-fit: contain;
            background: #f0f0f0; border-radius: 20px; margin-bottom: 20px;
        }
        .materi-title { font-family: 'Chewy', cursive; font-size: 3.5rem; margin: 10px 0; color: #444; }
        .materi-desc { font-size: 1.8rem; line-height: 1.4; color: #666; font-weight: 600; }
        .blue-text { color: #2980b9; }
        .red-text { color: #c0392b; }

        /* VIDEO */
        #view-video { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .video-wrapper {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -45%);
            width: 1200px; padding: 30px; background: #FFD93D; border-radius: 40px;
            box-shadow: 0 20px 0 #E6C229, 0 40px 50px rgba(0,0,0,0.3); z-index: 20; text-align: center;
        }
        .tv-antenna {
            position: absolute; top: -60px; left: 50%; width: 100px; height: 60px;
            border-left: 8px solid #E6C229; border-right: 8px solid #E6C229;
            transform: translateX(-50%) perspective(100px) rotateX(40deg); z-index: -1;
        }
        .video-screen { width: 100%; border-radius: 20px; background: #000; display: block; border: 8px solid #fff; }

        /* GAME MENU SELECTION */
        #view-game-menu { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .game-selection-container {
            position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%);
            display: flex; gap: 50px;
        }
        .btn-game-select {
            width: 300px; height: 400px; background: #fff; border-radius: 40px;
            border: 10px solid; display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.2s; box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .btn-game-select:hover { transform: scale(1.05) translateY(-10px); }
        .btn-game-select h3 { font-family: 'Chewy'; font-size: 3rem; margin: 20px 0 0 0; }
        .icon-game { font-size: 5rem; margin-bottom: 20px; }

        /* GAME 1: DRAG AND DROP */
        #view-game-drag { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .game-board {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 80%; height: 70%;
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
        }
        .drop-zone-container { display: flex; gap: 100px; width: 100%; justify-content: center; }
        .drop-zone {
            width: 500px; 
            height: 350px; 
            background: rgba(255,255,255,0.5);
            border: 8px dashed #fff; 
            border-radius: 30px;
            
            /* --- BAGIAN YANG DIUBAH --- */
            display: flex;
            flex-direction: row;       /* Susun menyamping (kiri-kanan) */
            flex-wrap: wrap;           /* Izinkan item turun ke bawah jika penuh */
            align-content: flex-start; /* Rapatkan konten ke sisi atas */
            justify-content: center;   /* Rata tengah secara horizontal */
            gap: 15px;                 /* Jarak antar item */
            /* ------------------------- */
            
            padding: 20px; 
            transition: all 0.3s;
            overflow: hidden; /* Mencegah item "tumpah" keluar garis */
        }
        .drop-zone h3 {
            width: 100%; /* PENTING: Paksa judul ambil lebar penuh */
            text-align: center;
            
            font-family: 'Chewy', cursive; 
            font-size: 2.5rem; 
            margin: 0 0 10px 0; /* Kurangi margin bawah sedikit */
            color: #fff; 
            -webkit-text-stroke: 2px #000; /* Memberi garis tepi hitam 2px */
            paint-order: stroke fill; /* Memastikan garis tepi tidak menimpa warna putih */
            text-shadow: 3px 3px 0px rgba(0,0,0,0.3); /* Bayangan tambahan agar makin timbul */
            /* ---------------------------------- */

            background: rgba(0,0,0,0.2); /* Background sedikit gelap di belakang teks */
            padding: 5px 20px; 
            border-radius: 20px;
        }
        .zone-beraturan { background: rgba(108, 197, 214, 0.4); border-color: #6CC5D6; }
        .zone-tak-beraturan { background: rgba(255, 111, 97, 0.4); border-color: #FF6F61; }
        .drop-zone.dragover { transform: scale(1.05); background: rgba(255,255,255,0.8); border-style: solid; }
        
        .item-tray {
            width: 100%; height: 200px; background: rgba(255, 238, 0, 0.3);
            border-radius: 30px; border: 4px solid rgba(255,255,255,0.5);
            display: flex; align-items: center; justify-content: center; gap: 40px;
            padding: 20px; backdrop-filter: blur(5px);
        }
        .draggable-item {
            width: 80px; height: 80px; cursor: grab; transition: transform 0.2s;
            filter: drop-shadow(5px 5px 5px rgba(0,0,0,0.2)); object-fit: contain;
            margin: 5px; /* Jarak aman */
            object-fit: contain;
        }
        .draggable-item:active { cursor: grabbing; transform: scale(1.1); }

        /* GAME 2: HUJAN BIDANG */
        #view-game-rain { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .hud-rain {
            position: absolute; top: 30px; left: 50%; transform: translateX(-50%);
            display: flex; gap: 50px; z-index: 50;
        }
        .score-box, .life-box {
            background: #FFF; padding: 10px 30px; border-radius: 30px;
            font-family: 'Chewy', cursive; font-size: 2.5rem; color: #444;
            border: 4px solid #FFD93D; box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        .rain-area { position: absolute; width: 100%; height: 100%; overflow: hidden; cursor: none; }
        
        #player-bucket {
            position: absolute; bottom: 50px; left: 50%; width: 150px; height: 150px;
            transform: translateX(-50%);
            background-image: url('assets/keranjang.png'); 
            background-size: contain; background-repeat: no-repeat; background-position: bottom center;
            z-index: 20; 
        }
        .falling-item { position: absolute; width: 100px; height: 100px; object-fit: contain; z-index: 10; }
        
        /* GAME 3: MENCARI BENTUK */
        #view-game-seek { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .seek-area { width: 100%; height: 100%; position: relative; }
        .hidden-item {
            position: absolute; cursor: pointer; transition: all 0.3s ease;
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.5)); opacity: 0.9;
        }
        .hidden-item:hover { transform: scale(1.1); filter: drop-shadow(0 0 10px yellow); }
        .item-found-anim {
            position: fixed !important; top: 50% !important; left: 50% !important;
            transform: translate(-50%, -50%) scale(3) !important; z-index: 100 !important; opacity: 1 !important;
        }
        #h-item1 { top: 600px; left: 300px; width: 80px; }
        #h-item2 { top: 800px; left: 1000px; width: 100px; }
        #h-item3 { top: 400px; left: 1500px; width: 120px; }
        #h-item4 { top: 200px; left: 800px; width: 90px; }
        #h-item5 { top: 900px; left: 1600px; width: 110px; }
        #found-label {
            position: fixed; top: 65%; left: 50%; transform: translate(-50%, -50%);
            background: #FFF; padding: 20px 60px; border-radius: 50px;
            border: 5px solid #FFD93D; font-family: 'Chewy'; font-size: 4rem; color: #d35400;
            z-index: 101; display: none; animation: popIn 0.3s;
            box-shadow: 0 10px 50px rgba(0,0,0,0.5);
        }

        /* PLACEHOLDER PAGES (ASESMEN & DEV) */
        .placeholder-page {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10;
        }
        .placeholder-box {
            background: #FFF; padding: 50px; border-radius: 40px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        /* POPUPS & OVERLAYS */
        #game-over-screen, #win-message, #seek-win-message {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .win-box {
            background: #FFD93D; padding: 50px 100px; border-radius: 50px; text-align: center;
            border: 10px solid #fff; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .win-box h1 { font-family: 'Chewy', cursive; font-size: 5rem; color: #d35400; margin: 0; }

        /* ===========================
           PAGE: PENGEMBANG (CREDITS)
           =========================== */
        /* Background Putih Kertas */
        .dev-page-container {
            width: 100%; height: 100%; 
            background-color: #FFFFFF; 
            position: relative;
            display: flex; flex-direction: column; align-items: center;
            padding-top: 100px; /* Jarak dari atas */
            color: #000;
            font-family: 'Nunito', sans-serif; /* Font formal */
        }

        /* Logo Atas */
        .dev-logo-top {
            width: 120px; height: auto; margin-bottom: 20px;
        }

        /* Header Teks */
        .dev-header {
            text-align: center; margin-bottom: 20px;
        }
        .dev-h1 { font-size: 1.8rem; font-weight: 800; margin: 5px 0; text-transform: uppercase; }
        .dev-h2 { font-size: 1.5rem; font-weight: 700; margin: 5px 0; text-transform: uppercase; }
        .dev-h3 { font-size: 1.2rem; font-weight: 700; margin: 5px 0; width: 100%; margin-left: auto; margin-right: auto; }

        /* Garis Oranye */
        .orange-line {
            width: 90%; height: 4px; background-color: #F39C12; 
            margin-bottom: 40px;
        }

        /* Grid Layout untuk Daftar Nama (Agar titik dua sejajar) */
        .credits-grid {
            display: grid;
            grid-template-columns: 250px 30px 1000px; /* Lebar Label | Titik Dua | Isi */
            gap: 15px 0; /* Jarak vertikal antar baris */
            font-size: 1.4rem;
            text-align: left;
            margin-bottom: 50px;
        }

        .c-label {
            color: #3498db; /* Warna Biru */
            font-weight: 700;
        }
        .c-sep {
            font-weight: 700; text-align: center;
        }
        .c-val {
            color: #333;
        }

        /* Garis Biru di Bawah Footer (Khusus Halaman Dev) */
        .dev-blue-line {
            position: absolute;
            bottom: 15px; /* Posisi di bawah footer (footer ada di bottom:30px) */
            left: 0; right: 0; margin: auto; /* Posisi Tengah */
            
            width: 350px; /* Lebar sedikit lebih panjang dari footer */
            height: 6px;  /* Ketebalan garis */
            background-color: #0056b3; /* Warna Biru */
            border-radius: 10px; /* Ujung bulat */
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* ===========================
           GAME 3: HIDDEN OBJECT (UPDATE HOTSPOTS)
           =========================== */
        
        /* Area Sentuh (Awalnya transparan/tidak terlihat) */
        .hitbox {
            position: absolute;
            cursor: pointer;
            border: 4px solid transparent; /* Garis tepi transparan */
            border-radius: 50%; /* Agar agak bulat, bisa diatur per item */
            transition: all 0.3s;
            z-index: 20;
        }

        /* Efek saat disentuh/ditemukan */
        .hitbox.found {
            border-color: #FFD93D; /* Muncul garis kuning */
            background-color: rgba(255, 217, 61, 0.4); /* Isi warna kuning transparan */
            animation: popIn 0.5s;
            pointer-events: none; /* Tidak bisa diklik lagi */
        }

        /* Posisi Spesifik Berdasarkan Gambar Taman Anda (Estimasi 1920x1080) */
        
        /* 1. PERSEGI (Jendela Kuning di Kiri Atas) */
        #spot-persegi {
            top: 230px; left: 450px; 
            width: 95px; height: 95px;
            border-radius: 10px; /* Kotak */
        }

        /* 2. SEGITIGA (Atap Rumah Burung di Kanan Atas) */
        #spot-segitiga {
            top: 95px; left: 1280px; 
            width: 200px; height: 130px;
            border-radius: 0; /* Bebas */
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%); /* Membentuk area klik segitiga */
        }

        /* 3. LINGKARAN (Bola Biru Besar di Bawah) */
        #spot-lingkaran {
            top: 823px; left: 1042px; 
            width: 180px; height: 180px;
            border-radius: 50%; /* Bulat sempurna */
        }

        /* 4. SEGI LIMA (Mainan Kayu di Bak Pasir Kiri Bawah) */
        #spot-segilima {
            top: 800px; left: 690px; 
            width: 150px; height: 150px;
            border-radius: 20px;
        }

        /* 5. PERSEGI PANJANG (Pintu Sekolah di Belakang) */
        #spot-persegipanjang {
            top: 250px; left: 650px; 
            width: 160px; height: 200px;
            border-radius: 5px;
        }

        /* ===========================
           GAME 4: DUEL SHOOTER (FIXED)
           =========================== */
        #view-game-duel {
            width: 100%; height: 100%; 
            position: absolute; top:0; left:0;
            
            /* GANTI BACKGROUND JADI GAMBAR AGAR LEBIH KEREN */
            background: url('assets/Background Tembak.png') no-repeat center center / cover; 
            /* Atau jika ingin warna gelap saja: background: #1a1a2e; */
            
            overflow: hidden;
            touch-action: none; 
            user-select: none;  
            -webkit-user-select: none;
        }

        /* Area Sentuh (Garis Pembatas Tengah) */
        .duel-touch-zone {
            position: absolute; top: 0; bottom: 0; width: 50%;
            z-index: 5; /* Z-index kecil saja, di belakang pesawat */
        }
        #p1-zone { left: 0; border-right: 2px dashed rgba(255,255,255,0.3); }
        #p2-zone { right: 0; }

        /* HUD Skor */
        .duel-score-box {
            position: absolute; top: 20px; 
            font-size: 3rem; font-family: 'Chewy'; color: white;
            z-index: 20; text-shadow: 2px 2px 0 #000;
            pointer-events: none; /* Agar tidak menghalangi sentuhan */
        }
        #d-score1 { left: 40px; color: #3498db; }
        #d-score2 { right: 40px; color: #e74c3c; }

        /* Meriam / Pesawat */
        .duel-cannon {
            position: absolute; bottom: 20px;
            width: 110px; height: 110px; /* Ukuran Pesawat */
            z-index: 15;
            
            /* PENTING: Agar gambar pas di tengah jari */
            transform: translateX(-50%); 
        }

        /* Posisi Awal Pesawat */
        #cannon-p1 { 
            left: 25%; 
        }
        #cannon-p2 { 
            left: 75%; 
        }
        
        /* Pastikan gambar di dalam div pesawat mengisi penuh */
        .duel-cannon img {
            width: 100%; height: 100%; object-fit: contain;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.5));
        }

        /* Peluru */
        .bullet {
            position: absolute; 
            width: 10px; height: 35px;
            border-radius: 5px; 
            z-index: 10;
            transform: translateX(-50%);
        }
        .bullet-p1 { 
            background: #4facfe; 
            box-shadow: 0 0 15px #4facfe; /* Efek glowing biru */
        }
        .bullet-p2 { 
            background: #ff5858; 
            box-shadow: 0 0 15px #ff5858; /* Efek glowing merah */
        }

        /* Target Jatuh */
        .duel-item {
            position: absolute; width: 80px; height: 80px;
            object-fit: contain; z-index: 14;
        }

        /* Efek Beku */
        .frozen { 
            filter: grayscale(100%) brightness(0.7); 
            opacity: 0.8; 
        }

        #duel-timer {
            position: absolute; top: 15px; left: 50%; transform: translateX(-50%);
            font-family: 'Chewy', cursive; font-size: 4rem; 
            color: #FFD93D; /* Warna Kuning Emas */
            text-shadow: 3px 3px 0 #000;
            z-index: 20;
            background: rgba(0,0,0,0.3);
            padding: 0 20px;
            border-radius: 20px;
        }
        
        /* --- PAGE: TUJUAN PEMBELAJARAN --- */
        #view-tujuan { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        
        .tujuan-box {
            position: absolute; 
            top: 50%; /* Posisi vertikal sedikit di bawah tengah */
            left: 80px; /* Jarak dari kiri layar */
            transform: translateY(-50%); /* Centering vertikal saja */
            
            background: rgba(255, 255, 255, 0.9); /* Putih agak transparan */
            padding: 40px;
            border-radius: 40px;
            border: 6px solid #FFD93D; /* List warna kuning */
            text-align: center;
            
            /* PENTING: Lebar dibatasi 40-45% agar tidak menabrak gambar Guru di kanan */
            width: 45%; 
            
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .tujuan-list {
            text-align: left;
            margin-top: 30px;
            font-size: 2rem;
            color: #555;
            line-height: 1.8;
        }
        
        .tujuan-icon {
            font-size: 5rem; margin-bottom: 20px; display: block;
        }


        /* --- TOMBOL LANJUT BELAJAR (ANIMASI) --- */
        .btn-lanjut {
            background: linear-gradient(to bottom, #2ecc71, #27ae60); /* Gradasi Hijau Segar */
            color: white;
            border: none;
            border-radius: 50px; /* Bentuk Kapsul */
            padding: 15px 50px;
            font-size: 2rem;
            font-family: 'Fredoka', sans-serif;
            font-weight: bold;
            cursor: pointer;
            margin-top: 30px;
            
            /* Efek 3D Tebal */
            box-shadow: 0 8px 0 #219150, 0 15px 20px rgba(0,0,0,0.2);
            transition: all 0.2s;
            
            /* Animasi Berdenyut */
            animation: pulse-green 2s infinite;
        }

        /* Efek saat Ditekan (Gepeng) */
        .btn-lanjut:active {
            transform: translateY(8px); /* Turun ke bawah */
            box-shadow: 0 0 0 #219150, inset 0 5px 10px rgba(0,0,0,0.2); /* Bayangan hilang */
        }

        /* Definisi Animasi Denyut */
        @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); } /* Membesar sedikit */
            100% { transform: scale(1); }
        }

        /* --- MATERI BARU: FIXED LAYOUT --- */
        #view-materi {
            width: 100%; height: 100%; 
            position: absolute; top:0; left:0;
            
            /* Background Kelas Papan Tulis */
            background: url('assets/Background Materi.png') no-repeat center center / cover;
            
            overflow: hidden;
        }

        /* Container Judul (Agar tidak menutupi konten) */
        .header-materi {
            position: absolute; top: 20px; width: 100%; text-align: center;
            z-index: 10;
        }

        /* Container Utama (BOX TENGAH) */
        .materi-container {
            position: absolute;
            /* Kita naikkan sedikit posisinya agar pas dengan papan tulis di gambar */
            top: 48%; left: 50%; 
            transform: translate(-50%, -50%);
            width: 95%; height: 75%; /* Lebih lebar agar menjangkau papan tulis */
            
            display: flex; 
            align-items: center; 
            justify-content: center;
        }

        .materi-slide { 
            display: none; 
            width: 100%; height: 100%; 
            animation: fadeIn 0.5s; 
        }
        
        /* Pastikan slide aktif pakai Flexbox biar kiri-kanan */
        .materi-slide.active { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 50px; 
        }

        /* KOLOM KIRI (TEKS) */
        .col-teks {
            flex: 1.1; /* Sedikit lebih lebar untuk area papan tulis */
            height: 80%;
            text-align: left;
            
            /* PENTING: Penyesuaian agar pas di Papan Tulis */
            padding: 20px 50px 20px 80px; /* Padding kiri besar agar tidak mepet bingkai */
            background: transparent; /* Transparan agar papan tulis terlihat */
            box-shadow: none; /* Hilangkan bayangan kotak */
            border: none; /* Hilangkan garis pinggir */
            
            /* Gaya Teks Kapur */
            color: #fff; /* Teks Putih */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5); /* Bayangan agar terbaca jelas */
            
            display: flex; flex-direction: column; justify-content: center;
        }
        .col-teks ul, .col-teks li, .col-teks p, .col-teks h2 {
            color: white !important;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.3);
        }
        .col-teks div {
            background: rgba(255,255,255,0.2) !important; /* Putih transparan tipis */
            border: 2px dashed rgba(255,255,255,0.5);
            color: white !important;
            width: fit-content;  /* Lebarnya hanya secukup teks saja */
            max-width: 70%;      /* Jaga-jaga agar tidak terlalu panjang */
            margin-top: 20px;
        }
        
        /* KOLOM KANAN (KUIS) */
        .col-kuis {
            flex: 0.9; /* Sisa area kanan */
            text-align: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding-right: 40px; /* Geser dikit biar ga mepet kanan */
        }

        /* --- UPDATE GRID KUIS (6 GAMBAR) --- */
        .quiz-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 Kolom */
            gap: 15px; /* Jarak antar kartu */
            margin-top: 10px;
            width: 100%;
            padding: 0 20px; /* Padding agar tidak mepet pinggir */
        }
        
        .quiz-card-small {
            background: white; 
            border-radius: 15px;
            border: 4px solid #fff;
            aspect-ratio: 1 / 1; /* Agar tetap kotak sempurna */
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            cursor: pointer; 
            transition: all 0.2s;
            overflow: hidden; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            position: relative;
        }

        .quiz-card-small:hover { transform: scale(1.08); border-color: #FFD93D; z-index: 5; }
        .quiz-card-small:active { transform: scale(0.95); }
        
        .quiz-card-small img { 
            width: 85%; height: 85%; 
            object-fit: contain; 
        }

        /* TOMBOL NAVIGASI (PANAH SAJA) */
        .btn-prev, .btn-next {
            position: absolute; bottom: 30px;
            width: 80px; height: 80px; border-radius: 50%;
            border: none; background: #2c3e50; color: white;
            font-size: 3rem; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 50; transition: transform 0.2s;
            display: flex; align-items: center; justify-content: center;
            padding-bottom: 10px; /* Biar panahnya pas di tengah visual */
        }
        .btn-prev:hover, .btn-next:hover { transform: scale(1.1); background: #34495e; }
        
        .btn-prev { left: 40px; }
        .btn-next { right: 40px; }

        /* --- MODAL FEEDBACK (BENAR/SALAH) --- */
        #feedback-modal {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.8); z-index: 200;
            display: flex; align-items: center; justify-content: center;
        }
        .feedback-box {
            background: white; width: 500px; padding: 40px;
            border-radius: 30px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            animation: popIn 0.3s;
        }

        /* Animations */
        @keyframes sway-gentle { 0%, 100% { transform: rotate(-2deg); } 50% { transform: rotate(1deg); } }
        @keyframes popIn { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        @keyframes pulse-btn { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .floating-shape { position: absolute; opacity: 0.6; z-index: 2; animation: floatUp linear infinite; pointer-events: none; }
        @keyframes floatUp { 0% { transform: translateY(1100px) rotate(0deg); opacity: 0; } 100% { transform: translateY(-100px) rotate(360deg); opacity: 0; } }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="decor-layer"></div>
        
        <div class="footer-info">
            <img src="assets/Logo Giat SD.png" alt="Logo Giat SD" class="footer-logo">
            <span>Direktorat SD</span>
        </div>

        <div id="view-cover">
            <img src="assets/Anak SD Cover.png" class="hero-image" alt="Siswa SD">
            <div class="content-wrapper">
                <div class="badge-class">SENI RUPA FASE A</div>
                <h1 class="main-title">MENGENAL<br><span class="title-part-2">BIDANG</span></h1>
                <button class="btn-start-cover" onclick="switchPage('menu')">MULAI ‚ñ∂</button>
            </div>
        </div>

        <div id="view-menu" class="hidden">
            <div class="header-bar"><h2 class="page-title">MENU UTAMA</h2></div>
            
            <div style="position: absolute; top: 42%; left: 50%; transform: translate(-50%, -50%); width: 80%; display: flex; flex-direction: column; align-items: center;">
                
                <div style="display:flex; gap: 30px; margin-bottom: 30px;">
                    <div class="btn-menu-main btn-tujuan" onclick="switchPage('tujuan')" style="width: 280px;">
                        <span>üéØ</span> Tujuan
                    </div>
                    
                    <div class="btn-menu-main btn-materi" onclick="switchPage('materi')" style="width: 280px;">
                        <span>üìñ</span> Materi
                    </div>
                    
                    <div class="btn-menu-main btn-video" onclick="switchPage('video')" style="width: 280px;">
                        <span>üé¨</span> Berkarya
                    </div>
                </div>

                <div style="display:flex; gap: 30px;">
                    <div class="btn-menu-main btn-games" onclick="switchPage('game-menu')" style="width: 280px;">
                        <span>üéÆ</span> Games
                    </div>

                    <div class="btn-menu-main btn-asesmen" onclick="switchPage('asesmen')" style="width: 280px;">
                        <span>üìù</span> Asesmen
                    </div>

                    <div class="btn-menu-main btn-dev" onclick="switchPage('dev')" style="width: 280px;">
                        <span>üë®‚Äçüíª</span> Pengembang
                    </div>
                </div>

            </div>
        </div>

        <div id="view-tujuan" class="hidden">
            <button class="btn-home" onclick="switchPage('menu')">üè† MENU</button>
            
            <div class="tujuan-box">
                <span class="tujuan-icon">üéØ</span>
                <h1 style="font-family:'Chewy'; font-size:4rem; color:#FF6F61; margin:0;">TUJUAN PEMBELAJARAN</h1>
                
                <div class="tujuan-list">
                    <p>Setelah kegiatan ini, kamu akan bisa:</p>
                    <ul style="list-style-type: none; padding: 0;">
                        <li>‚úÖ Mengenal bentuk yang <strong>rapi (beraturan)</strong>.</li>
                        <li>‚úÖ Mengenal bentuk yang <strong>bebas (tak beraturan)</strong>.</li>
                        <li>‚úÖ <strong>Mengelompokkan</strong> benda sesuai jenisnya.</li>
                    </ul>
                </div>

                <button class="btn-lanjut" onclick="switchPage('materi')">
                    LANJUT BELAJAR üöÄ
                </button>
            </div>
        </div>

        <div id="view-materi" class="hidden">
            <button class="btn-home" onclick="switchPage('menu')">üè† MENU</button>
            
            <div class="header-materi">
                <h2 class="page-title" id="materi-title" style="display:inline-block; background:white; padding:10px 40px; border-radius:30px; box-shadow:0 5px 15px rgba(0,0,0,0.1);">Mengenal Bentuk</h2>
            </div>

            <div class="materi-container">
                
                <div id="slide-1" class="materi-slide active">
                    <div class="col-teks" style="border-left-color: #3498db;">
                        <h2 class="blue-text" style="font-size: 2.5rem; margin-bottom: 15px;">A. Bidang Beraturan</h2>
                        <p style="font-size: 1.6rem; line-height: 1.4; margin-bottom: 15px;">
                            Benda ini terlihat rapi. Ciri-cirinya:
                        </p>
                        <ul style="font-size: 1.5rem; margin-left: 20px; line-height: 1.6; color: #555;">
                            <li>Garisnya <strong>lurus</strong> atau lengkung sempurna.</li>
                            <li>Sudutnya jelas.</li>
                            <li>Bisa diukur dengan alat tulis.</li>
                        </ul>
                        <div style="margin-top: 20px; background: #eaf2f8; padding: 15px; border-radius: 15px; font-size: 1.5rem;">
                            üëá <strong>Tugas:</strong> Ketuk 3 Gambar yang <strong>BERATURAN!</strong>
                        </div>
                    </div>

                    <div class="col-kuis">
                        
                        <div style="margin-bottom: 20px; background: white; padding: 10px 30px; border-radius: 50px; border: 4px solid #3498db; box-shadow: 0 5px 10px rgba(0,0,0,0.1); animation: pulse-btn 2s infinite;">
                            <h3 style="margin:0; font-family:'Chewy'; font-size: 2rem; color:#3498db;">üëá Pilih 3 Benda BERATURAN!</h3>
                        </div>
                        <div class="quiz-grid">
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! üü©', 'Persegi (segiempat) adalah bentuk beraturan karena memiliki 4 sisi lurus yang sama panjang.')">
                                <img src="assets/persegi.png" alt="Persegi">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... üçÉ', 'Daun adalah bentuk tidak beraturan karena garis tepinya melengkung bebas dan alami.')">
                                <img src="assets/daun.png" alt="Daun">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! üî∫', 'Segitiga adalah bentuk beraturan karena dibuat dari 3 garis lurus yang saling menyambung.')">
                                <img src="assets/segitiga.png" alt="Segitiga">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... ‚òÅÔ∏è', 'Awan adalah bentuk tidak beraturan karena bentuknya selalu berubah-ubah tertiup angin.')">
                                <img src="assets/awan.png" alt="Awan">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! üîµ', 'Lingkaran adalah bentuk beraturan karena memiliki garis lengkung yang sempurna dan simetris.')">
                                <img src="assets/lingkaran.png" alt="Lingkaran">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... üå≥', 'Pohon adalah bentuk tidak beraturan karena tumbuh alami, rantingnya bercabang bebas.')">
                                <img src="assets/pohon.png" alt="Pohon">
                            </div>
                        </div>
                    </div>
                </div>

                <div id="slide-2" class="materi-slide">
                    <div class="col-teks" style="border-left-color: #e74c3c;">
                        <h2 class="red-text" style="font-size: 2.5rem; margin-bottom: 15px;">B. Bidang Tak Beraturan</h2>
                        <p style="font-size: 1.6rem; line-height: 1.4; margin-bottom: 15px;">
                            Bentuk ini sifatnya bebas. Ciri-cirinya:
                        </p>
                        <ul style="font-size: 1.5rem; margin-left: 20px; line-height: 1.6; color: #555;">
                            <li>Garisnya bebas (keriting/bergelombang).</li>
                            <li>Tidak kaku.</li>
                            <li>Biasanya benda-benda alam.</li>
                        </ul>
                        <div style="margin-top: 20px; background: #fadbd8; padding: 15px; border-radius: 15px; font-size: 1.5rem;">
                            üëá <strong>Tugas:</strong> Ketuk 3 Gambar yang <strong>TAK BERATURAN!</strong>
                        </div>
                    </div>

                    <div class="col-kuis">
                        <div style="margin-bottom: 20px; background: white; padding: 10px 30px; border-radius: 50px; border: 4px solid #db3434; box-shadow: 0 5px 10px rgba(0,0,0,0.1); animation: pulse-btn 2s infinite;">
                            <h3 style="margin:0; font-family:'Chewy'; font-size: 2rem; color:#db3434;">üëá Pilih 3 Benda TIDAK BERATURAN!</h3>
                        </div>
                        <div class="quiz-grid">
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... üü©', 'Persegi itu bentuk beraturan. Lihat, garisnya lurus dan rapi sekali.')">
                                <img src="assets/persegi.png" alt="Persegi">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! üçÉ', 'Daun adalah bentuk tidak beraturan karena tepi daunnya bergerigi atau melengkung bebas.')">
                                <img src="assets/daun.png" alt="Daun">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... üî∫', 'Segitiga punya sudut lancip yang jelas, jadi dia termasuk bentuk beraturan.')">
                                <img src="assets/segitiga.png" alt="Segitiga">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! ‚òÅÔ∏è', 'Awan adalah bentuk tidak beraturan. Cobalah menggambarnya, pasti garisnya bebas kan?')">
                                <img src="assets/awan.png" alt="Awan">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... üîµ', 'Lingkaran itu bulat sempurna dan rapi, jadi dia termasuk bentuk beraturan.')">
                                <img src="assets/lingkaran.png" alt="Lingkaran">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! üå≥', 'Pohon adalah bentuk tidak beraturan. Batang dan daunnya tumbuh ke segala arah.')">
                                <img src="assets/pohon.png" alt="Pohon">
                            </div>
                        </div>
                    </div>
                </div>
                </div>

            <button class="btn-prev" onclick="changeMateriSlide(-1)">‚¨Ö</button>
            <button class="btn-next" onclick="changeMateriSlide(1)">‚û°</button>

            <div id="feedback-modal" class="hidden" onclick="closeFeedback()">
                <div class="feedback-box" onclick="event.stopPropagation()">
                    <div id="fb-icon" style="font-size: 5rem; margin-bottom: 20px;">ü§î</div>
                    <h2 id="fb-title" style="font-family:'Chewy'; font-size:3rem; margin-bottom:15px;">Judul</h2>
                    <p id="fb-message" style="font-size: 1.5rem; color:#555; line-height: 1.6;">Pesan</p>
                    <button class="btn-game" style="margin-top: 30px; font-size: 1.5rem;" onclick="closeFeedback()">OK, LANJUT! üëç</button>
                </div>
            </div>
        </div>

        <div id="view-video" class="hidden">
            <button class="btn-home" onclick="switchPage('menu')">üè† MENU</button>
            <div class="header-bar"><h2 class="page-title">üé¨ Mari Berkarya!</h2></div>
            <div class="video-wrapper">
                <div class="tv-antenna"></div>
                <video id="mainVideo" class="video-screen" controls>
                    <source src="assets/Video Pembelajaran Bidang.mp4" type="video/mp4">
                    Browser tidak support video.
                </video>
            </div>
        </div>

        <div id="view-game-menu" class="hidden">
            <button class="btn-home" onclick="switchPage('menu')">üè† MENU</button>
            <div class="header-bar"><h2 class="page-title">PILIH PERMAINAN</h2></div>
            
            <div class="game-selection-container">
                <div class="btn-game-select" onclick="switchPage('game-drag')" style="border-color: #3498db; color: #3498db;">
                    <div class="icon-game">üß©</div>
                    <h3>KELOMPOK</h3>
                </div>
                <div class="btn-game-select" onclick="switchPage('game-rain')" style="border-color: #2ecc71; color: #2ecc71;">
                    <div class="icon-game">üåßÔ∏è</div>
                    <h3>HUJAN</h3>
                </div>
                <div class="btn-game-select" onclick="switchPage('game-seek')" style="border-color: #9b59b6; color: #9b59b6;">
                    <div class="icon-game">üîç</div>
                    <h3>MENCARI</h3>
                </div>
                <div class="btn-game-select" onclick="switchPage('game-duel')" style="border-color: #b65959; color: #b65959;">
                    <div class="icon-game">üöÄ</div>
                    <h3>TEMBAK</h3>
                </div>
            </div>
        </div>

        <div id="view-game-drag" class="hidden">
            <button class="btn-home" onclick="switchPage('game-menu')">‚Ü© KEMBALI</button>
            <div class="header-bar"><h2 class="page-title">Kelompokkan Bidang Ini!</h2></div>
            <div class="game-board">
                <div class="drop-zone-container">
                    <div class="drop-zone zone-beraturan" data-target="type-beraturan" ondragover="allowDrop(event)" ondrop="drop(event)">
                        <h3>Beraturan</h3>
                    </div>
                    <div class="drop-zone zone-tak-beraturan" data-target="type-tak-beraturan" ondragover="allowDrop(event)" ondrop="drop(event)">
                        <h3>Tak Beraturan</h3>
                    </div>
                </div>
                <div class="item-tray" id="item-tray">
                    <img src="assets/persegi.png" id="item1" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                    <img src="assets/pohon.png" id="item2" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/segitiga.png" id="item3" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                    <img src="assets/sepatu.png" id="item4" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/awan.png" id="item5" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/daun.png" id="item6" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/batu.png" id="item7" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/air.png" id="item8" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/jamdinding.png" id="item9" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                    <img src="assets/layang-layang.png" id="item10" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                    <img src="assets/buku.png" id="item11" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                    <img src="assets/uangkoin.png" id="item12" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                </div>
            </div>
            <div id="win-message" class="hidden">
                <div class="win-box">
                    <h1>HEBAT! üéâ</h1>
                    <p style="font-size: 2rem; color: #555;">Kamu berhasil mengelompokkan semua bidang!</p>
                    <button class="btn-game" style="font-size: 2rem; padding: 15px 50px;" onclick="switchPage('game-menu')">SELESAI üè†</button>
                </div>
            </div>
        </div>

        <div id="view-game-rain" class="hidden">
            <button class="btn-home" onclick="switchPage('game-menu')">‚Ü© KEMBALI</button>
            
            <div class="hud-rain">
                <div class="score-box">SKOR: <span id="score-rain">0</span>/100</div>
                <div class="life-box">NYAWA: <span id="life-rain">3</span> ‚ù§Ô∏è</div>
            </div>

            <div id="start-rain-overlay" style="position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:60; display:flex; flex-direction:column; align-items:center; justify-content:center;">
                <h1 style="color:white; font-family:'Chewy'; font-size:4rem;">TANGKAP BIDANG TAK BERATURAN!</h1>
                <p style="color:#eee; font-size:2rem; margin-bottom:40px;">Awas! Jangan tangkap bidang beraturan ya!</p>
                <button class="btn-game" onclick="startGameRain()">MULAI MAIN ‚ñ∂</button>
            </div>

            <div class="rain-area" id="rain-area">
                <div id="player-bucket"></div>
            </div>
            
            <div id="game-over-screen" class="hidden">
                <h1 id="end-title" style="color:#FF6F61; font-family:'Chewy'; font-size:6rem; -webkit-text-stroke: 4px white;">PERMAINAN SELESAI</h1>
                <h2 style="color:white; font-size:3rem; font-family:'Fredoka';">Skor Akhir: <span id="final-score">0</span></h2>
                <div style="display:flex; gap:20px; margin-top:30px;">
                    <button class="btn-game" onclick="startGameRain()">MAIN LAGI üîÑ</button>
                    <button class="btn-nav btn-back" style="position:relative; bottom:0; left:0;" onclick="switchPage('game-menu')">KELUAR üè†</button>
                </div>
            </div>
        </div>

        <div id="view-game-seek" class="hidden">
            
            <button class="btn-home" onclick="switchPage('game-menu')">‚Ü© KEMBALI</button>
            
            <div class="hud-rain">
                <div class="score-box">DITEMUKAN: <span id="seek-count">0</span>/5</div>
            </div>

            <div class="seek-area">
                <div id="spot-persegi" class="hitbox" onclick="foundHitbox(this, 'PERSEGI!')"></div>
                <div id="spot-segitiga" class="hitbox" onclick="foundHitbox(this, 'SEGITIGA!')"></div>
                <div id="spot-lingkaran" class="hitbox" onclick="foundHitbox(this, 'LINGKARAN!')"></div>
                <div id="spot-segilima" class="hitbox" onclick="foundHitbox(this, 'SEGI LIMA!')"></div>
                <div id="spot-persegipanjang" class="hitbox" onclick="foundHitbox(this, 'PERSEGI PANJANG!')"></div>
            </div>

            <div id="found-label">NAMA BENTUK</div>

            <div id="seek-win-message" class="hidden">
                <div class="win-box">
                    <h1>LUAR BIASA! üîç</h1>
                    <p style="font-size: 2rem; color: #555;">Kamu menemukan semua bentuk tersembunyi!</p>
                    <button class="btn-game" style="font-size: 2rem; padding: 15px 50px;" onclick="switchPage('game-menu')">SELESAI üè†</button>
                </div>
            </div>
        </div>

        <div id="view-game-duel" class="hidden">
            <button style="position: absolute; left: 50%; transform: translateX(-50%); top: 20px; z-index: 100;" class="btn-home" onclick="switchPage('game-menu')">‚Ü© KEMBALI</button>
            <div id="duel-timer">60</div>
            <div id="d-score1" class="duel-score-box">P1: 0</div>
            <div id="d-score2" class="duel-score-box">P2: 0</div>

            <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:rgba(255,255,255,0.1); font-size:8rem; font-weight:bold; z-index:0;">VS</div>

            <div style="position:absolute; top:100px; left:25%; transform:translateX(-50%); color:#3498db; font-weight:bold; font-size:1.5rem; text-align:center; z-index:5; text-shadow: 1px 1px 0 #000;">
                TEMBAK BENDA<br>BERATURAN!
            </div>

            <div style="position:absolute; top:100px; left:75%; transform:translateX(-50%); color:#e74c3c; font-weight:bold; font-size:1.5rem; text-align:center; z-index:5; text-shadow: 1px 1px 0 #000;">
                TEMBAK BENDA<br>TAK BERATURAN!
            </div>
            <div id="p1-zone" class="duel-touch-zone"></div>
            <div id="p2-zone" class="duel-touch-zone"></div>

            <div id="cannon-p1" class="duel-cannon">
                <img src="assets/Pesawat Beraturan.png" style="width:100%; height:100%; object-fit:contain;">
            </div>
            <div id="cannon-p2" class="duel-cannon">
                <img src="assets/Pesawat Tak Beraturan.png" style="width:100%; height:100%; object-fit:contain;">
            </div>

            <div id="duel-area"></div>

            <div id="duel-win-screen" class="hidden" style="position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:200; display:flex; flex-direction:column; align-items:center; justify-content:center;">
                <h1 id="duel-winner-text" style="color:#FFD93D; font-family:'Chewy'; font-size:5rem;">PEMENANGNYA...</h1>
                <button class="btn-game" onclick="startDuelGame()">MAIN LAGI üîÑ</button>
                <button class="btn-nav btn-back" style="position:relative; margin-top:20px; bottom:0; left:0;" onclick="switchPage('game-menu')">KELUAR üè†</button>
            </div>
        </div>

        <div id="view-asesmen" class="hidden placeholder-page">
            <button class="btn-home" onclick="switchPage('menu')">üè† MENU</button>
            <div class="placeholder-box">
                <h1 style="font-family:'Chewy'; font-size:4rem; color:#9b59b6;">HALAMAN ASESMEN</h1>
                <p style="font-size:2rem; color:#555;">(Segera Hadir)</p>
            </div>
        </div>

        <div id="view-dev" class="hidden">
            <div class="dev-page-container">
                
                <img src="assets/Logo Tut Wuri Handayani.png" class="dev-logo-top" alt="Logo">

                <div class="dev-header">
                    <div class="dev-h2">DIREKTORAT SEKOLAH DASAR</div>
                    <div class="dev-h3">DIREKTORAT JENDERAL PENDIDIKAN ANAK USIA DINI, PENDIDIKAN DASAR, DAN PENDIDIKAN MENENGAH</div>
                    <div class="dev-h2">KEMENTERIAN PENDIDIKAN DASAR DAN MENENGAH</div>
                </div>

                <div class="orange-line"></div>

                <div class="credits-grid">
                    <div class="c-label">Pengarah</div>
                    <div class="c-sep">:</div>
                    <div class="c-val">Moch. Salim Somad, S.Kom., M.Pd., Direktorat Sekolah Dasar</div>

                    <div class="c-label">Penanggung Jawab</div>
                    <div class="c-sep">:</div>
                    <div class="c-val">Lanny Anggraini, S.Pd., M.A., Direktorat Sekolah Dasar</div>

                    <div class="c-label">Pengembang</div>
                    <div class="c-sep">:</div>
                    <div class="c-val">Didik Rahmadi, S.Pd.</div>

                    <div class="c-label">Pengkaji Materi</div>
                    <div class="c-sep">:</div>
                    <div class="c-val">Bintang Adhi Permana, M.Pd.</div>

                    <div class="c-label">Pengkaji Media</div>
                    <div class="c-sep">:</div>
                    <div class="c-val">
                        1. Muh. Noor Ginanjar Jaelani, S.Pd., Direktorat Sekolah Dasar<br>
                        2. Ine Rahmawati, S.Pd., M.Si., Direktorat Sekolah Dasar
                    </div>

                    <div style="height: 20px;"></div><div style="height: 20px;"></div><div style="height: 20px;"></div>

                    <div class="c-label">Diterbitkan oleh:</div>
                    <div class="c-sep">:</div>
                    <div class="c-val">
                        Direktorat Sekolah Dasar<br>
                        Direktorat Jenderal Pendidikan Anak Usia Dini, Pendidikan Dasar, dan Pendidikan Menengah<br>
                        Kementerian Pendidikan Dasar dan Menengah<br>
                        Tahun 2025
                    </div>
                </div>

                <button class="btn-home" style="top: 20px; left: 20px;" onclick="switchPage('menu')">üè† MENU</button>
                
                <div class="dev-blue-line"></div>
            </div>
        </div>

    </div>

    <script>
        // 1. AUTO SCALE
        function scaleContainer() {
            const container = document.getElementById('game-container');
            const scale = Math.min(window.innerWidth / 1920, window.innerHeight / 1080);
            container.style.transform = `scale(${scale})`;
        }
        window.addEventListener('load', scaleContainer);
        window.addEventListener('resize', scaleContainer);

        // 2. DECORATION
        function createDecorations() {
            const layer = document.getElementById('decor-layer');
            const colors = ['#FF6F61', '#FFD93D', '#6CC5D6', '#FFFFFF'];
            for(let i=0; i<20; i++) {
                const el = document.createElement('div');
                el.classList.add('floating-shape');
                const size = Math.random() * 50 + 20;
                const left = Math.random() * 1920;
                const duration = Math.random() * 10 + 5;
                const delay = Math.random() * 5;
                const color = colors[Math.floor(Math.random() * colors.length)];
                el.style.width = size + 'px'; el.style.height = size + 'px';
                el.style.left = left + 'px'; el.style.backgroundColor = color;
                el.style.animationDuration = duration + 's'; el.style.animationDelay = '-' + delay + 's';
                if(Math.random() > 0.5) el.style.borderRadius = '50%'; else el.style.transform = 'rotate(45deg)';
                layer.appendChild(el);
            }
        }
        createDecorations();

        // 3. PAGE SWITCHING LOGIC (UPDATE FOOTER)
        function switchPage(pageName) {
            const footer = document.querySelector('.footer-info');
            const container = document.getElementById('game-container');
            
            // Variabel elemen halaman
            const pages = {
                cover: document.getElementById('view-cover'),
                menu: document.getElementById('view-menu'),
                tujuan: document.getElementById('view-tujuan'),
                materi: document.getElementById('view-materi'),
                video: document.getElementById('view-video'),
                gameMenu: document.getElementById('view-game-menu'),
                gameDrag: document.getElementById('view-game-drag'),
                gameRain: document.getElementById('view-game-rain'),
                gameSeek: document.getElementById('view-game-seek'),
                gameDuel: document.getElementById('view-game-duel'),
                asesmen: document.getElementById('view-asesmen'),
                dev: document.getElementById('view-dev')
            };

            // 1. Reset Video & Game State
            const videoEl = document.getElementById('mainVideo');
            if(videoEl) { videoEl.pause(); videoEl.currentTime = 0; }
            
            if(pageName !== 'game-rain') { isGameRunning = false; clearInterval(spawnInterval); }
            
            // 2. Atur Footer (Hilang di Game Duel & Hujan)
            if(pageName === 'game-duel' || pageName === 'game-rain') {
                if(footer) footer.style.display = 'none'; 
            } else {
                if(footer) footer.style.display = ''; 
            }

            // 3. Sembunyikan Semua Halaman Dulu
            Object.values(pages).forEach(el => { if(el) el.classList.add('hidden'); });

            // 4. Munculkan Halaman Target & Ganti Background
            if (pageName === 'cover') {
                pages.cover.classList.remove('hidden');
                container.style.background = "url('assets/Background Cover.png') no-repeat center center / cover";
            
            } else if (pageName === 'menu') {
                pages.menu.classList.remove('hidden');
                container.style.background = "url('assets/Background Menu.png') no-repeat center center / cover";
            
            } else if (pageName === 'tujuan') {
                pages.tujuan.classList.remove('hidden');
                container.style.background = "url('assets/Background Tujuan Pembelajaran.png') no-repeat center center / cover";
            
            } else if (pageName === 'materi') {
                pages.materi.classList.remove('hidden');
                container.style.background = "url('assets/Background Materi.png') no-repeat center center / cover";
                currentMateriSlide = 1;
                showMateriSlide(1);
            
            } else if (pageName === 'video') {
                pages.video.classList.remove('hidden');
                container.style.background = "linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)";
            
            } else if (pageName === 'game-menu') {
                pages.gameMenu.classList.remove('hidden');
                container.style.background = "url('assets/Background Menu Game.png') no-repeat center center / cover";
            
            } else if (pageName === 'game-drag') {
                pages.gameDrag.classList.remove('hidden');
                container.style.background = "url('assets/backgrounddraganddrop.png') no-repeat center center / cover";
                resetGame();
            
            } else if (pageName === 'game-rain') {
                pages.gameRain.classList.remove('hidden');
                // Pastikan nama file background Hujan benar (misal: Background Hujan.png)
                container.style.background = "linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)";
                document.getElementById('start-rain-overlay').classList.remove('hidden');
            
            } else if (pageName === 'game-seek') {
                pages.gameSeek.classList.remove('hidden');
                container.style.background = "url('assets/Hidden Background.png') no-repeat center center / cover";                
                resetSeekGame();
            
            } else if (pageName === 'game-duel') {
                document.getElementById('view-game-duel').classList.remove('hidden');
                // Game Duel background-nya diatur di CSS #view-game-duel, jadi container utama tidak perlu diubah, tapi untuk aman kasih warna gelap
                // container.style.background = "#2c3e50"; 
                startDuelGame();
            
            } else if (pageName === 'asesmen') {
                pages.asesmen.classList.remove('hidden');
                container.style.background = "linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%)";
            
            } else if (pageName === 'dev') {
                pages.dev.classList.remove('hidden');
                container.style.background = "#FFFFFF"; 
            }
        }

        function showFeedback(isCorrect, title, message) {
            const modal = document.getElementById('feedback-modal');
            const icon = document.getElementById('fb-icon');
            const titleElem = document.getElementById('fb-title');
            const msgElem = document.getElementById('fb-message');
            
            modal.classList.remove('hidden');
            
            titleElem.innerText = title;
            msgElem.innerText = message;
            
            if (isCorrect) {
                icon.innerText = "‚úÖ";
                titleElem.style.color = "#2ecc71"; // Hijau
                // Opsional: Bisa putar suara 'Tring' disini
            } else {
                icon.innerText = "‚ùå";
                titleElem.style.color = "#e74c3c"; // Merah
                // Opsional: Bisa putar suara 'Tetot' disini
            }
        }

        function closeFeedback() {
            document.getElementById('feedback-modal').classList.add('hidden');
        }
        
        // --- LOGIC SLIDESHOW MATERI ---
        let currentMateriSlide = 1;

        function changeMateriSlide(n) {
            showMateriSlide(currentMateriSlide += n);
        }

        function showMateriSlide(n) {
            const slides = document.querySelectorAll('.materi-slide');
            const dots = document.querySelectorAll('.slide-dots span');
            
            // Loop slide (agar bisa muter dari akhir ke awal)
            if (n > slides.length) { currentMateriSlide = 1 }
            if (n < 1) { currentMateriSlide = slides.length }

            // Sembunyikan semua slide
            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('dot-active'));

            // Munculkan slide yang aktif
            document.getElementById('slide-' + currentMateriSlide).classList.add('active');
            
            // Update warna titik indikator
            if(document.getElementById('dot-' + currentMateriSlide)) {
                document.getElementById('dot-' + currentMateriSlide).classList.add('dot-active');
            }
        }

        // --- GAME LOGIC 1: DRAG ---
        let placedItems = 0; const totalItems = 12;
        function allowDrop(ev) { ev.preventDefault(); ev.currentTarget.classList.add('dragover'); }
        document.querySelectorAll('.drop-zone').forEach(zone => { zone.addEventListener('dragleave', () => zone.classList.remove('dragover')); });
        function drag(ev) { ev.dataTransfer.setData("text", ev.target.id); ev.dataTransfer.setData("type", ev.target.dataset.type); }
        function drop(ev) {
            ev.preventDefault(); ev.currentTarget.classList.remove('dragover');
            const dataID = ev.dataTransfer.getData("text"); const dataType = ev.dataTransfer.getData("type"); const targetType = ev.currentTarget.dataset.target;
            if (dataType === targetType) {
                const draggedElement = document.getElementById(dataID); ev.currentTarget.appendChild(draggedElement);
                draggedElement.setAttribute('draggable', 'false'); draggedElement.style.cursor = 'default';
                placedItems++; checkWin();
            } else { alert("Ups! Salah üòä"); }
        }
        function checkWin() { if (placedItems === totalItems) setTimeout(() => { document.getElementById('win-message').classList.remove('hidden'); }, 500); }
        function resetGame() {
            placedItems = 0; document.getElementById('win-message').classList.add('hidden');
            const tray = document.getElementById('item-tray');
            ['item1', 'item2', 'item3', 'item4', 'item5', 'item6'].forEach(id => {
                const el = document.getElementById(id);
                if(el) { tray.appendChild(el); el.setAttribute('draggable', 'true'); el.style.cursor = 'grab'; }
            });
        }

        // --- GAME LOGIC 2: RAIN (UPDATED) ---
        let gameRainInterval, spawnInterval, scoreRain = 0, lifeRain = 3, isGameRunning = false;
        
        function moveBasket(clientX) {
            if (!isGameRunning) return;
            let xPosPercent = (clientX / window.innerWidth) * 100;
            if (xPosPercent < 5) xPosPercent = 5; if (xPosPercent > 95) xPosPercent = 95;
            document.getElementById('player-bucket').style.left = xPosPercent + '%';
        }
        window.addEventListener('mousemove', (e) => { moveBasket(e.clientX); });
        window.addEventListener('touchmove', (e) => { moveBasket(e.touches[0].clientX); }, {passive: false});

        function startGameRain() {
            scoreRain = 0; lifeRain = 3; isGameRunning = true;
            document.getElementById('score-rain').innerText = scoreRain + "/100"; 
            document.getElementById('life-rain').innerText = lifeRain;
            
            // Reset Judul Akhir
            const title = document.getElementById('end-title');
            title.innerText = "PERMAINAN SELESAI"; title.style.color = "#FF6F61";

            document.getElementById('start-rain-overlay').classList.add('hidden'); 
            document.getElementById('game-over-screen').classList.add('hidden');
            
            document.querySelectorAll('.falling-item').forEach(item => item.remove());
            spawnInterval = setInterval(spawnItem, 1200); 
            gameRainInterval = requestAnimationFrame(gameLoop);
        }

        function spawnItem() {
            if (!isGameRunning) return;
            const area = document.getElementById('rain-area');
            const item = document.createElement('img'); 
            item.classList.add('falling-item');
            
            // 1. Tentukan Tipe dulu (Beraturan atau Tak Beraturan)
            const type = Math.random() > 0.5 ? 'beraturan' : 'tak-beraturan';
            item.dataset.type = type; 
            
            // 2. Pilih Gambar Acak Berdasarkan Tipe
            if (type === 'beraturan') {
                // DAFTAR GAMBAR BERATURAN (Bisa ditambah lagi jika mau)
                const images = [
                    'assets/persegi.png', 
                    'assets/segitiga.png',
                    'assets/lingkaran.png'
                ];
                // Pilih satu secara acak
                const randomImg = images[Math.floor(Math.random() * images.length)];
                item.src = randomImg;
            } 
            else {
                // DAFTAR GAMBAR TAK BERATURAN
                const images = [
                    'assets/pohon.png', 
                    'assets/daun.png',
                    'assets/sepatu.png'
                ];
                // Pilih satu secara acak
                const randomImg = images[Math.floor(Math.random() * images.length)];
                item.src = randomImg;
            }
            
            // Posisi Jatuh Random
            item.style.left = (Math.random() * 90) + '%'; 
            item.style.top = '-100px';
            area.appendChild(item);
            
            let topPos = -100; 
            const fallSpeed = 4 + Math.random() * 3; 

            function fall() {
                if (!isGameRunning) return;
                topPos += fallSpeed; 
                item.style.top = topPos + 'px';
                
                // 1. DETEKSI TABRAKAN
                if (checkCollision(item)) {
                    if (item.dataset.type === 'tak-beraturan') { 
                        // BENAR (Target)
                        scoreRain += 10; 
                        document.getElementById('score-rain').innerText = scoreRain + "/100";
                        if (scoreRain >= 100) gameWinRain();
                    } 
                    else {
                        // SALAH (Tangkap Beraturan)
                        reduceLife();
                    }
                    item.remove(); 
                    return;
                }
                
                // 2. DETEKSI LEWAT BATAS BAWAH
                if (topPos > 1080) { 
                    // Jika target (tak beraturan) terlewat, nyawa berkurang
                    if (item.dataset.type === 'tak-beraturan') {
                        reduceLife();
                    }
                    item.remove(); 
                    return; 
                }
                
                requestAnimationFrame(fall);
            }
            fall();
        }

        function reduceLife() {
            lifeRain--; 
            document.getElementById('life-rain').innerText = lifeRain;
            
            // Efek Layar Merah Sekilas
            const container = document.getElementById('game-container');
            container.style.background = 'red';
            setTimeout(() => { 
                // Kembalikan ke warna background Game Rain
                if(isGameRunning) container.style.background = 'linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)'; 
            }, 200);
            
            if(lifeRain <= 0) gameOver();
        }

        function checkCollision(item) {
            const player = document.getElementById('player-bucket'); 
            const pRect = player.getBoundingClientRect(); 
            const iRect = item.getBoundingClientRect();
            return !(pRect.right < iRect.left || pRect.left > iRect.right || pRect.bottom < iRect.top || pRect.top > iRect.bottom);
        }
        function gameLoop() { if (!isGameRunning) return; requestAnimationFrame(gameLoop); }
        
        function gameOver() {
            isGameRunning = false; clearInterval(spawnInterval); cancelAnimationFrame(gameRainInterval);
            const title = document.getElementById('end-title');
            title.innerText = "YAAH.. GAGAL üò¢"; title.style.color = "#FF6F61";
            document.getElementById('final-score').innerText = scoreRain; 
            document.getElementById('game-over-screen').classList.remove('hidden');
        }

        function gameWinRain() {
            isGameRunning = false; clearInterval(spawnInterval); cancelAnimationFrame(gameRainInterval);
            const title = document.getElementById('end-title');
            title.innerText = "HEBAT! MENANG! üéâ"; title.style.color = "#2ECC71";
            document.getElementById('final-score').innerText = "100"; 
            document.getElementById('game-over-screen').classList.remove('hidden');
        }

        // --- LOGIC GAME 3: SEEK (UPDATE HOTSPOT) ---
        let seekCount = 0;
        
        function foundHitbox(element, name) {
            // Jika sudah ditemukan, abaikan
            if (element.classList.contains('found')) return;

            // 1. Ubah tampilan kotak jadi terlihat (Garis Kuning)
            element.classList.add('found');
            
            // 2. Tampilkan Label Nama
            const label = document.getElementById('found-label'); 
            label.innerText = name; 
            label.style.display = 'block';

            // 3. Update Skor
            seekCount++; 
            document.getElementById('seek-count').innerText = seekCount;

            // 4. Sembunyikan label setelah 2 detik
            setTimeout(() => {
                label.style.display = 'none';
                // Cek Menang
                if(seekCount >= 5) {
                    document.getElementById('seek-win-message').classList.remove('hidden');
                }
            }, 1500);
        }

        function resetSeekGame() {
            seekCount = 0; 
            document.getElementById('seek-count').innerText = '0';
            document.getElementById('seek-win-message').classList.add('hidden');
            
            // Reset semua hitbox menjadi transparan lagi
            document.querySelectorAll('.hitbox').forEach(item => { 
                item.classList.remove('found'); 
            });
        }

       // --- LOGIC GAME 4: DUEL SHOOTER (TIMER 60s + SCORE 100) ---
        let duelInterval, duelSpawnInterval, duelTimerInterval; // Tambah variabel timer
        let p1FireInterval, p2FireInterval; 
        let p1Score = 0, p2Score = 0;
        let duelTime = 60; // Waktu awal 60 detik
        let isDuelRunning = false;
        let p1Frozen = false, p2Frozen = false;

        // Variabel Memori Posisi (Anti-Lag)
        let p1Pos = 25; 
        let p2Pos = 75;

        let duelHandlers = {};

        function startDuelGame() {
            isDuelRunning = true;
            p1Score = 0; p2Score = 0;
            duelTime = 60; // Reset Waktu
            
            updateDuelScore();
            document.getElementById('duel-timer').innerText = duelTime; // Reset Tampilan Waktu
            
            p1Frozen = false; p2Frozen = false;
            
            const c1 = document.getElementById('cannon-p1');
            const c2 = document.getElementById('cannon-p2');
            c1.classList.remove('frozen'); c2.classList.remove('frozen');
            
            // Reset Posisi Memori & Layar
            p1Pos = 25; p2Pos = 75;
            
            document.getElementById('duel-win-screen').classList.add('hidden');
            document.querySelectorAll('.duel-item').forEach(e => e.remove());
            document.querySelectorAll('.bullet').forEach(e => e.remove());

            setupDuelControls();

            // Mulai Loop
            duelInterval = requestAnimationFrame(duelLoop);
            duelSpawnInterval = setInterval(spawnDuelItem, 1500);
            
            // Mulai Timer Mundur
            clearInterval(duelTimerInterval);
            duelTimerInterval = setInterval(handleDuelTimer, 1000); // Jalan setiap 1 detik
            
            startAutoFireP1();
            startAutoFireP2();
        }

        // --- FUNGSI TIMER BERJALAN ---
        function handleDuelTimer() {
            if (!isDuelRunning) return;
            duelTime--;
            document.getElementById('duel-timer').innerText = duelTime;

            // Jika Waktu Habis (0 detik)
            if (duelTime <= 0) {
                finishDuelGame('time-up');
            }
        }

        // --- UPDATE FUNGSI CEK MENANG (POIN 100) ---
        function checkDuelWin() {
            // Menang jika salah satu mencapai 100 poin
            if (p1Score >= 100 || p2Score >= 100) {
                finishDuelGame('score-limit');
            }
        }

        // --- FUNGSI SELESAI GAME (LOGIKA PEMENANG) ---
        function finishDuelGame(reason) {
            isDuelRunning = false;
            stopAutoFire(); 
            clearInterval(duelSpawnInterval); 
            clearInterval(duelTimerInterval); // Stop Waktu
            cancelAnimationFrame(duelInterval);
            removeDuelControls();
            
            const winScreen = document.getElementById('duel-win-screen');
            const winText = document.getElementById('duel-winner-text');
            winScreen.classList.remove('hidden');
            
            let winner = '';
            
            if (p1Score > p2Score) {
                winner = "PEMAIN 1 (BIRU) MENANG! üèÜ";
                winText.style.color = "#3498db";
            } else if (p2Score > p1Score) {
                winner = "PEMAIN 2 (MERAH) MENANG! üèÜ";
                winText.style.color = "#e74c3c";
            } else {
                winner = "SERI! SAMA KUAT! ü§ù";
                winText.style.color = "#FFD93D";
            }

            // Tambahkan pesan kenapa menang
            if (reason === 'score-limit') {
                winText.innerHTML = winner + "<br><span style='font-size:3rem'>Mencapai 100 Poin!</span>";
            } else {
                winText.innerHTML = winner + "<br><span style='font-size:3rem'>Waktu Habis!</span>";
            }
        }

        // --- SISA KODE BAWAH TETAP SAMA ---
        // (Function autoFire, move, createBullet, spawn, hit, dll copy dari kode terakhir yang sudah works)
        // ... (Pastikan Anda menyalin fungsi-fungsi pendukung lainnya di sini) ...
        
        // --- FUNGSI AUTO FIRE ---
        function startAutoFireP1() { clearInterval(p1FireInterval); p1FireInterval = setInterval(() => { if (isDuelRunning && !p1Frozen) createBullet('p1'); }, 400); }
        function startAutoFireP2() { clearInterval(p2FireInterval); p2FireInterval = setInterval(() => { if (isDuelRunning && !p2Frozen) createBullet('p2'); }, 400); }
        function stopAutoFire() { clearInterval(p1FireInterval); clearInterval(p2FireInterval); }

        function setupDuelControls() {
            removeDuelControls();
            const gameArea = document.getElementById('view-game-duel');
            duelHandlers.move = (e) => { if (e.cancelable) e.preventDefault(); handleDuelMove(e); };
            gameArea.addEventListener('touchstart', duelHandlers.move, { passive: false });
            gameArea.addEventListener('touchmove', duelHandlers.move, { passive: false });
            gameArea.addEventListener('mousemove', (e) => {
                const clientX = e.clientX;
                if (clientX < window.innerWidth / 2) moveP1(clientX); else moveP2(clientX);
            });
        }
        function removeDuelControls() {
            const gameArea = document.getElementById('view-game-duel');
            if(duelHandlers.move) { gameArea.removeEventListener('touchstart', duelHandlers.move); gameArea.removeEventListener('touchmove', duelHandlers.move); }
        }
        function handleDuelMove(e) {
            if (!isDuelRunning) return;
            let touches = e.touches; 
            for (let i = 0; i < touches.length; i++) {
                const clientX = touches[i].clientX;
                if (clientX < window.innerWidth / 2) moveP1(clientX); else moveP2(clientX);
            }
        }
        function moveP1(clientX) {
            if (p1Frozen) return; 
            let percent = (clientX / window.innerWidth) * 100;
            percent = Math.max(5, Math.min(45, percent)); 
            p1Pos = percent; 
            document.getElementById('cannon-p1').style.left = percent + '%';
        }
        function moveP2(clientX) {
            if (p2Frozen) return;
            let percent = (clientX / window.innerWidth) * 100;
            percent = Math.max(55, Math.min(95, percent)); 
            p2Pos = percent; 
            document.getElementById('cannon-p2').style.left = percent + '%';
        }
        function createBullet(player) {
            const area = document.getElementById('duel-area');
            const bullet = document.createElement('div');
            bullet.className = `bullet bullet-${player}`;
            const cannon = document.getElementById(`cannon-${player}`);
            let currentPercent = (player === 'p1') ? p1Pos : p2Pos;
            bullet.style.left = currentPercent + '%';
            let startY = cannon.offsetTop + 10;
            bullet.style.top = startY + 'px';
            area.appendChild(bullet);
            let bulletY = startY;
            bullet.dataset.intervalId = setInterval(() => {
                if(!isDuelRunning) { clearInterval(bullet.dataset.intervalId); bullet.remove(); return; }
                bulletY -= 20; bullet.style.top = bulletY + 'px';
                const items = document.querySelectorAll('.duel-item');
                items.forEach(item => {
                    if (isColliding(bullet, item)) { handleHit(player, item); clearInterval(bullet.dataset.intervalId); bullet.remove(); }
                });
                if (bulletY < -50) { clearInterval(bullet.dataset.intervalId); bullet.remove(); }
            }, 20);
        }
        function handleHit(player, item) {
            const type = item.dataset.type;
            let correct = false;
            if (player === 'p1' && type === 'beraturan') correct = true;
            if (player === 'p2' && type === 'tak-beraturan') correct = true;
            if (correct) {
                if(player === 'p1') p1Score++; else p2Score++;
                item.style.transform = "scale(1.5)"; item.style.opacity = "0";
                setTimeout(() => item.remove(), 200);
                updateDuelScore(); checkDuelWin();
            } else { freezePlayer(player); }
        }
        function freezePlayer(player) {
            const cannon = document.getElementById(`cannon-${player}`);
            cannon.classList.add('frozen');
            if(player === 'p1') { p1Frozen = true; p1Score = Math.max(0, p1Score - 1); clearInterval(p1FireInterval); } 
            else { p2Frozen = true; p2Score = Math.max(0, p2Score - 1); clearInterval(p2FireInterval); }
            updateDuelScore();
            setTimeout(() => {
                cannon.classList.remove('frozen');
                if(player === 'p1') { p1Frozen = false; startAutoFireP1(); } else { p2Frozen = false; startAutoFireP2(); }
            }, 1000); 
        }
        function updateDuelScore() { document.getElementById('d-score1').innerText = "P1: " + p1Score; document.getElementById('d-score2').innerText = "P2: " + p2Score; }
        function duelLoop() { if(isDuelRunning) requestAnimationFrame(duelLoop); }
        function isColliding(a, b) { const r1 = a.getBoundingClientRect(); const r2 = b.getBoundingClientRect(); return !(r1.right < r2.left || r1.left > r2.right || r1.bottom < r2.top || r1.top > r2.bottom); }
        function spawnDuelItem() {
            if (!isDuelRunning) return;
            const area = document.getElementById('duel-area');
            const item = document.createElement('img');
            item.className = 'duel-item';
            const type = Math.random() > 0.5 ? 'beraturan' : 'tak-beraturan';
            item.dataset.type = type;
            if (type === 'beraturan') { const imgs = ['assets/persegi.png', 'assets/segitiga.png', 'assets/lingkaran.png', 'assets/jamdinding.png']; item.src = imgs[Math.floor(Math.random() * imgs.length)]; } 
            else { const imgs = ['assets/pohon.png', 'assets/sepatu.png', 'assets/awan.png', 'assets/daun.png']; item.src = imgs[Math.floor(Math.random() * imgs.length)]; }
            let posX = Math.random() * (window.innerWidth - 100); let posY = -100; let speedX = (Math.random() - 0.5) * 6; let speedY = 3 + Math.random() * 2;     
            item.style.left = posX + 'px'; item.style.top = posY + 'px'; area.appendChild(item);
            const moveInt = setInterval(() => {
                if(!isDuelRunning) { clearInterval(moveInt); item.remove(); return; }
                posX += speedX; posY += speedY;
                if (posX <= 0 || posX >= window.innerWidth - 80) speedX *= -1; 
                item.style.left = posX + 'px'; item.style.top = posY + 'px';
                if (posY > window.innerHeight) { item.remove(); clearInterval(moveInt); }
            }, 20);
        }
    </script>
</body>
</html>
