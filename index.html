<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seni Rupa - Mengenal Bidang</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Chewy&family=Nunito:wght@700&display=swap" rel="stylesheet">

    <style>
        /* 1. Chewy (Untuk Judul) */
        @font-face {
            font-family: 'Chewy';
            src: url('fonts/Chewy-Regular.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        /* 2. Fredoka (Untuk Teks Biasa) */
        @font-face {
            font-family: 'Fredoka';
            src: url('fonts/Fredoka-Regular.ttf') format('truetype');
            font-weight: 400; /* Regular */
            font-style: normal;
        }
        
        @font-face {
            font-family: 'Fredoka';
            src: url('fonts/Fredoka-SemiBold.ttf') format('truetype');
            font-weight: 600; /* SemiBold */
            font-style: normal;
        }

        /* 3. Nunito (Untuk Halaman Pengembang) */
        @font-face {
            font-family: 'Nunito';
            src: url('fonts/Nunito-Bold.ttf') format('truetype');
            font-weight: 700; /* Bold */
            font-style: normal;
        }

        /* --- RESET & BASIC SETUP --- */
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: #2C3E50;
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center;
            overflow: hidden; 
            font-family: 'Fredoka', sans-serif;
            user-select: none; 
            touch-action: none;
        }

        #game-container {
            width: 1920px; !important
            height: 1080px;!important
            background: url('assets/Background Cover.png') no-repeat center center;
            background-size: 100% 100%;
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            overflow: hidden; transform-origin: center center;
            transition: background 0.5s ease;
            max-width: none !important;
            max-height: none !important;
        }

        .hidden { display: none !important; }
        
        /* --- SHARED STYLES --- */
        .header-bar {
            position: absolute; top: 2%; left: 50%; transform: translateX(-50%);
            background: #FFF; padding: 0.5rem 4rem; border-radius: 50px;
            box-shadow: 0 1vh 0 rgba(0,0,0,0.1); z-index: 10; text-align: center;
        }
        .page-title { font-family: 'Chewy', cursive; font-size: 3rem; color: #FF6F61; margin: 0; text-shadow: 0.2rem 0.2rem 0px #e0e0e0;}
        
        /* Tombol Navigasi Home (Muncul di setiap sub-page) */
        .btn-home {
            position: absolute; top: 4%; left: 4%;
            background: #FFD93D; color: #d35400;
            font-family: 'Chewy', cursive; font-size: 1.8rem;
            padding: 10px 30px; border-radius: 50px; border: 4px solid #fff;
            cursor: pointer; z-index: 50; box-shadow: 0 5px 0 rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }
        .btn-home:active { transform: translateY(5px); box-shadow: none; }

        .btn-nav {
            font-family: 'Chewy', cursive; font-size: 2rem; padding: 15px 40px;
            border: none; border-radius: 50px; cursor: pointer; transition: all 0.1s; z-index: 30;
            display: flex; align-items: center; gap: 10px;
        }
        .btn-nav:hover { transform: translateY(4px); filter: brightness(1.1); }
        .btn-nav:active { transform: translateY(8px); }

        /* Footer Logo (Posisi Tengah) */
        .footer-info {
            position: absolute; 
            bottom: 3%; 
            left: 50%; /* Pindah ke tengah layar */
            transform: translateX(-50%); /* Geser balik 50% agar presisi di tengah */
            display: flex; align-items: center; gap: 15px;
            font-size: 1.5rem; color: #FFF; font-weight: bold;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2); z-index: 40;
            background: rgba(0, 217, 255, 0.5); padding: 10px 40px; /* Padding sedikit dilebarkan */
            border-radius: 50px; backdrop-filter: blur(5px);
            border: 2px solid rgba(255,255,255,0.4);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .footer-logo { height: 3rem; width: auto; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2)); }

        /* --- PAGE 1: COVER --- */
        #view-cover { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .hero-image {
            position: absolute; bottom: -4,6%; left: -2.6%; width: 58%;
            z-index: 20; transform-origin: bottom center; animation: sway-gentle 4s ease-in-out infinite;
            pointer-events: none; filter: drop-shadow(15px 0 25px rgba(0,0,0,0.2));
        }
        .content-wrapper {
            position: absolute; top: 0; right: 0; width: 55%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 30; padding-right: 3%;
        }
        .badge-class {
            background: #FFD93D; color: #d35400; font-family: 'Fredoka', sans-serif; font-weight: 600;
            font-size: 1.8rem; padding: 1% 2.5%; border-radius: 50px; border: 4px solid #FFF;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 10px; transform: rotate(-2deg);
        }
        .main-title {
            font-family: 'Chewy', cursive; font-size: 9rem; color: #FF6F61; line-height: 0.9;
            text-align: center; -webkit-text-stroke: 15px white; paint-order: stroke fill;
            filter: drop-shadow(5px 5px 0px rgba(0,0,0,0.1)); margin: 1% 0;
            animation: popIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .title-part-2 { color: #6CC5D6; display: block; font-size: 10rem; transform: rotate(-3deg); }
        .btn-start-cover {
            background: #FFD93D; color: #e74c3c; font-family: 'Chewy', cursive; font-size: 4.5rem;
            padding: 2% 6%; border: none; border-radius: 10rem; cursor: pointer; margin-top: 3%;
            box-shadow: 0 1.5vh 0 #E6C229, 0 2.5vh 2vw rgba(0,0,0,0.2), inset 0 0.5vh 0 rgba(255,255,255,0.5);
            text-shadow: 2.5% 2.5% 0 rgba(0,0,0,0.1);
            transition: all 0.1s; animation: pulse-btn 2s infinite;
        }
        .btn-start-cover:hover { transform: translateY(5px); box-shadow: 0px 10px 0px #E6C229, 0px 20px 20px rgba(0,0,0,0.2); }
        .btn-start-cover:active { transform: translateY(15px); box-shadow: 0px 0px 0px #E6C229; }



/* ----------------------------------------------------- PAGE 2: MENU UTAMA (NEW) --------------------------------------------------- */
        #view-menu { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 Kolom */
            gap: 3%;
            width: 70%;
            margin-top: 5vh;
        }
        /* Agar 2 tombol terakhir di tengah (Asesmen & Pengembang) */
        .menu-grid .centered-btn {
            grid-column: span 1; 
        }
        .menu-row-2 {
            display: flex; gap: 3%; justify-content: center; width: 100%; margin-top: 4vh;
        }

        .btn-menu-main {
            background: rgba(255,255,255,0.9);
            border: 0.5rem solid #fff;
            border-radius: 4rem;
            height: 15rem;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 1vh 2vh rgba(0,0,0,0.2);
            font-family: 'Chewy', cursive; font-size: 2.5rem; color: #555;
            text-decoration: none;
        }
        .btn-menu-main:hover { transform: scale(1.05) rotate(2deg); filter: brightness(1.1); }
        .btn-menu-main img { width: 35%; margin-bottom: 2vh; }
        
        /* Warna Tombol Menu */
        .btn-tujuan { border-color: #e67e22; color: #d35400; } /* BARU: Oranye */
        .btn-materi { border-color: #3498db; color: #3498db; }
        .btn-video { border-color: #e74c3c; color: #e74c3c; }
        .btn-games { border-color: #2ecc71; color: #2ecc71; }
        .btn-asesmen { border-color: #9b59b6; color: #9b59b6; }
        .btn-dev { border-color: #f1c40f; color: #f39c12; }

/*------------------------------------------------------------------------------------------------------------------------------*/

/* --------------------------------------------------- TOMBOL KEMENANGAN (POP UP) --------------------------------------------- */
        .btn-victory {
            background: linear-gradient(to bottom, #2ecc71, #27ae60);
            color: white;
            font-family: 'Chewy', cursive;
            font-size: 2.5rem;
            padding: 1.5vh 4vw;
            border: none;
            border-radius: 5vh;
            cursor: pointer;
            position: relative;
            box-shadow: 0 0.8vh 0 #219150, 0 1.5vh 2vh rgba(0,0,0,0.3), inset 0 0.2vh 0 rgba(255,255,255,0.3);
            transition: all 0.1s ease;
            user-select: none;
            animation: victory-pulse 2s infinite;
        }

        .btn-victory:hover {
            filter: brightness(1.1);
            transform: translateY(-0.2vh);
            box-shadow: 0 1vh 0 #219150, 0 2vh 2.5vh rgba(0,0,0,0.3), inset 0 0.2vh 0 rgba(255,255,255,0.3);
        }

        .btn-victory:active {
            transform: translateY(0.8vh);
            box-shadow: 0 0 0 #219150, inset 0 0.5vh 1vh rgba(0,0,0,0.2);
        }

        @keyframes victory-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        /* --- SUB PAGES --- */
        
        /* MATERI */
        #view-materi { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .materi-container {
            position: absolute; top: 55%; left: 50%; transform: translate(-50%, -50%);
            display: flex; gap: 80px; width: 80%; justify-content: center;
        }
        .materi-card {
            background: rgba(255,255,255,0.9); padding: 30px; border-radius: 40px;
            width: 500px; text-align: center; border: 8px solid #fff;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2); transition: transform 0.3s;
        }
        .materi-card:hover { transform: scale(1.05) rotate(1deg); }
        .card-beraturan { border-color: #6CC5D6; }
        .card-tak-beraturan { border-color: #FF6F61; }
        .materi-img {
            width: 100%; height: 350px; object-fit: contain;
            background: #f0f0f0; border-radius: 20px; margin-bottom: 20px;
        }
        .materi-title { font-family: 'Chewy', cursive; font-size: 3.5rem; margin: 10px 0; color: #444; }
        .materi-desc { font-size: 1.8rem; line-height: 1.4; color: #666; font-weight: 600; }
        .blue-text { color: #2980b9; }
        .red-text { color: #c0392b; }

        /* VIDEO */
        #view-video { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .video-wrapper {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -45%);
            width: 1200px; padding: 30px; background: #fadaa0; border-radius: 40px;
            
        }
        .tv-antenna {
            position: absolute; top: -60px; left: 50%; width: 100px; height: 60px;
            border-left: 8px solid #fadaa0; border-right: 8px solid #fadaa0;
            transform: translateX(-50%) perspective(100px) rotateX(40deg); z-index: -1;
        }
        .video-screen { width: 100%; border-radius: 20px; background: #000; display: block; border: 8px solid #fff; }

        /* GAME MENU SELECTION */
        #view-game-menu { 
            width: 100%; 
            height: 100%; 
            position: absolute; 
            top: 0; 
            left: 0; 
            z-index: 10; 
        }

        .game-selection-container {
            position: absolute; 
            top: 40%; 
            left: 50%; 
            transform: translate(-50%, -50%);
            display: flex; 
            gap: 3vw;
        }

        .btn-game-select {
            width: 16rem; 
            height: 18rem; 
            background: #fff; 
            border-radius: 2rem;
            border: 0.5rem solid; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            cursor: pointer; 
            transition: all 0.2s; 
            box-shadow: 0 1vh 2vh rgba(0,0,0,0.2);
        }

        .btn-game-select:hover { 
            transform: scale(1.05) translateY(-1vh); 
        }

        .btn-game-select h3 { 
            font-family: 'Chewy'; 
            font-size: 2.5rem; 
            margin: 0 0 0 0; 
        }

        .icon-game { 
            font-size: 5rem; 
            margin-bottom: 2vh; 
        }

        /* --- TOMBOL MULAI (KUNING JUICY) --- */
        .btn-start-action {
            /* Gradasi Kuning ke Emas */
            background: linear-gradient(to bottom, #FFD93D, #FFC107);
            color: #d35400; /* Teks Oranye Tua (agar kontras dan jelas) */
            
            /* Font & Ukuran */
            font-family: 'Chewy', cursive;
            font-size: 3rem; /* Sedikit lebih besar dari tombol biasa */
            padding: 15px 80px;
            
            /* Bentuk */
            border: 4px solid #fff; /* Tambah list putih biar makin pop-up */
            border-radius: 50px;
            cursor: pointer;
            position: relative;
            
            /* EFEK 3D (Lantai Oranye) */
            box-shadow: 
                0 8px 0 #e67e22,             /* Bayangan Tebal Bawah */
                0 15px 20px rgba(0,0,0,0.3), /* Bayangan Lembut */
                inset 0 2px 0 rgba(255,255,255,0.5); /* Kilauan Atas */
                
            transition: all 0.1s;
            user-select: none;
            
            /* Animasi Mengundang (Cepat) */
            animation: pulse-action 1.5s infinite ease-in-out;
        }

        /* Hover (Saat Mouse Diarahkan) */
        .btn-start-action:hover {
            transform: translateY(-3px);
            filter: brightness(1.1);
            box-shadow: 0 11px 0 #e67e22, 0 20px 25px rgba(0,0,0,0.3);
        }

        /* Active (Saat Ditekan - Efek Gepeng) */
        .btn-start-action:active {
            transform: translateY(8px); /* Turun pas bayangannya */
            box-shadow: 0 0 0 #e67e22, inset 0 5px 10px rgba(0,0,0,0.2);
        }

        /* Animasi Denyut */
        @keyframes pulse-action {
            0% { transform: scale(1); }
            50% { transform: scale(1.08); } /* Membesar lebih antusias */
            100% { transform: scale(1); }
        }

        /* GAME 1: DRAG AND DROP */
        #view-game-drag { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .game-board {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 80%; height: 70%;
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
        }
        .drop-zone-container { display: flex; gap: 100px; width: 100%; justify-content: center; }
        .drop-zone {
            width: 500px; 
            height: 350px; 
            background: rgba(255,255,255,0.5);
            border: 8px dashed #fff; 
            border-radius: 30px;
            
            /* --- BAGIAN YANG DIUBAH --- */
            display: flex;
            flex-direction: row;       /* Susun menyamping (kiri-kanan) */
            flex-wrap: wrap;           /* Izinkan item turun ke bawah jika penuh */
            align-content: flex-start; /* Rapatkan konten ke sisi atas */
            justify-content: center;   /* Rata tengah secara horizontal */
            gap: 15px;                 /* Jarak antar item */
            /* ------------------------- */
            
            padding: 20px; 
            transition: all 0.3s;
            overflow: hidden; /* Mencegah item "tumpah" keluar garis */
        }
        .drop-zone h3 {
            width: 100%; /* PENTING: Paksa judul ambil lebar penuh */
            text-align: center;
            
            font-family: 'Chewy', cursive; 
            font-size: 2.5rem; 
            margin: 0 0 10px 0; /* Kurangi margin bawah sedikit */
            color: #fff; 
            -webkit-text-stroke: 2px #000; /* Memberi garis tepi hitam 2px */
            paint-order: stroke fill; /* Memastikan garis tepi tidak menimpa warna putih */
            text-shadow: 3px 3px 0px rgba(0,0,0,0.3); /* Bayangan tambahan agar makin timbul */
            /* ---------------------------------- */

            background: rgba(0,0,0,0.2); /* Background sedikit gelap di belakang teks */
            padding: 5px 20px; 
            border-radius: 20px;
        }
        .zone-beraturan { background: rgba(108, 197, 214, 0.4); border-color: #6CC5D6; }
        .zone-tak-beraturan { background: rgba(255, 111, 97, 0.4); border-color: #FF6F61; }
        .drop-zone.dragover { transform: scale(1.05); background: rgba(255,255,255,0.8); border-style: solid; }
        
        .item-tray {
            width: 100%; height: 8rem; background: rgba(255, 238, 0, 0.3);
            border-radius: 30px; border: 4px solid rgba(255,255,255,0.5);
            display: flex; align-items: center; justify-content: center; gap: 2rem;
            padding: 1rem; backdrop-filter: blur(5px);
        }
        .draggable-item {
            width: 80px; height: 80px; cursor: grab; transition: transform 0.2s;
            filter: drop-shadow(5px 5px 5px rgba(0,0,0,0.2)); object-fit: contain;
            margin: 5px; /* Jarak aman */
            object-fit: contain;
        }
        .draggable-item:active { cursor: grabbing; transform: scale(1.1); }

        /* GAME 2: HUJAN BIDANG */
        #view-game-rain { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .hud-rain {
            position: absolute; top: 30px; left: 50%; transform: translateX(-50%);
            display: flex; gap: 50px; z-index: 50;
        }
        .score-box, .life-box {
            background: #FFF; padding: 10px 30px; border-radius: 30px;
            font-family: 'Chewy', cursive; font-size: 2.5rem; color: #444;
            border: 4px solid #FFD93D; box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        .rain-area { position: absolute; width: 100%; height: 100%; overflow: hidden; cursor: none; }
        
        #player-bucket {
            position: absolute; bottom: 50px; left: 50%; width: 150px; height: 150px;
            transform: translateX(-50%);
            background-image: url('assets/keranjang.png'); 
            background-size: contain; background-repeat: no-repeat; background-position: bottom center;
            z-index: 20; 
        }
        .falling-item { position: absolute; width: 100px; height: 100px; object-fit: contain; z-index: 10; }
        
        /* GAME 3: MENCARI BENTUK */
        #view-game-seek { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        .seek-area { width: 100%; height: 100%; position: relative; }
        .hidden-item {
            position: absolute; cursor: pointer; transition: all 0.3s ease;
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.5)); opacity: 0.9;
        }
        .hidden-item:hover { transform: scale(1.1); filter: drop-shadow(0 0 10px yellow); }
        .item-found-anim {
            position: fixed !important; top: 50% !important; left: 50% !important;
            transform: translate(-50%, -50%) scale(3) !important; z-index: 100 !important; opacity: 1 !important;
        }
        #h-item1 { top: 600px; left: 300px; width: 80px; }
        #h-item2 { top: 800px; left: 1000px; width: 100px; }
        #h-item3 { top: 400px; left: 1500px; width: 120px; }
        #h-item4 { top: 200px; left: 800px; width: 90px; }
        #h-item5 { top: 900px; left: 1600px; width: 110px; }
        #found-label {
            position: fixed; top: 65%; left: 50%; transform: translate(-50%, -50%);
            background: #FFF; padding: 20px 60px; border-radius: 50px;
            border: 5px solid #FFD93D; font-family: 'Chewy'; font-size: 4rem; color: #d35400;
            z-index: 101; display: none; animation: popIn 0.3s;
            box-shadow: 0 10px 50px rgba(0,0,0,0.5);
        }

        /* PLACEHOLDER PAGES (ASESMEN & DEV) */
        .placeholder-page {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10;
        }
        .placeholder-box {
            background: #FFF; padding: 50px; border-radius: 40px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        /* POPUPS & OVERLAYS */
        #game-over-screen, #win-message, #seek-win-message {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .win-box {
            background: #FFD93D; padding: 50px 100px; border-radius: 50px; text-align: center;
            border: 10px solid #fff; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .win-box h1 { font-family: 'Chewy', cursive; font-size: 5rem; color: #d35400; margin: 0; }

        /* ===========================
           PAGE: PENGEMBANG (CREDITS)
           =========================== */
        /* Background Putih Kertas */
        .dev-page-container {
            width: 100%; height: 100%; 
            background-color: #FFFFFF; 
            position: relative;
            display: flex; flex-direction: column; align-items: center;
            padding-top: 100px; /* Jarak dari atas */
            color: #000;
            font-family: 'Nunito', sans-serif; /* Font formal */
        }

        /* Logo Atas */
        .dev-logo-top {
            width: 120px; height: auto; margin-bottom: 20px;
        }

        /* Header Teks */
        .dev-header {
            text-align: center; margin-bottom: 20px;
        }
        .dev-h1 { font-size: 1.8rem; font-weight: 800; margin: 5px 0; text-transform: uppercase; }
        .dev-h2 { font-size: 1.5rem; font-weight: 700; margin: 5px 0; text-transform: uppercase; }
        .dev-h3 { font-size: 1.2rem; font-weight: 700; margin: 5px 0; width: 100%; margin-left: auto; margin-right: auto; }

        /* Garis Oranye */
        .orange-line {
            width: 90%; height: 4px; background-color: #F39C12; 
            margin-bottom: 40px;
        }

        /* Grid Layout untuk Daftar Nama (Agar titik dua sejajar) */
        .credits-grid {
            display: grid;
            grid-template-columns: 250px 30px 1000px; /* Lebar Label | Titik Dua | Isi */
            gap: 15px 0; /* Jarak vertikal antar baris */
            font-size: 1.4rem;
            text-align: left;
            margin-bottom: 50px;
        }

        .c-label {
            color: #3498db; /* Warna Biru */
            font-weight: 700;
        }
        .c-sep {
            font-weight: 700; text-align: center;
        }
        .c-val {
            color: #333;
        }

        /* Garis Biru di Bawah Footer (Khusus Halaman Dev) */
        .dev-blue-line {
            position: absolute;
            bottom: 15px; /* Posisi di bawah footer (footer ada di bottom:30px) */
            left: 0; right: 0; margin: auto; /* Posisi Tengah */
            
            width: 350px; /* Lebar sedikit lebih panjang dari footer */
            height: 6px;  /* Ketebalan garis */
            background-color: #0056b3; /* Warna Biru */
            border-radius: 10px; /* Ujung bulat */
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* ===========================
           GAME 3: HIDDEN OBJECT (UPDATE HOTSPOTS)
           =========================== */
        
        /* Area Sentuh (Awalnya transparan/tidak terlihat) */
        .hitbox {
            position: absolute;
            cursor: pointer;
            border: 4px solid transparent; /* Garis tepi transparan */
            border-radius: 50%; /* Agar agak bulat, bisa diatur per item */
            transition: all 0.3s;
            z-index: 20;
        }

        /* Efek saat disentuh/ditemukan */
        .hitbox.found {
            border-color: #FFD93D; /* Muncul garis kuning */
            background-color: rgba(255, 217, 61, 0.4); /* Isi warna kuning transparan */
            animation: popIn 0.5s;
            pointer-events: none; /* Tidak bisa diklik lagi */
        }

        /* Posisi Spesifik Berdasarkan Gambar Taman Anda (Estimasi 1920x1080) */
        
        /* 1. PERSEGI (Jendela Kuning di Kiri Atas) */
        #spot-persegi {
            top: 21.3%; 
            left: 23.44%;
            width: 4.95%; 
            height: 8.8%;
            border-radius: 0.5vw; /* Kotak */
        }

        /* 2. SEGITIGA (Atap Rumah Burung di Kanan Atas) */
        #spot-segitiga {
            top: 8.8%; 
            left: 66.67%;
            width: 10.42%; 
            height: 12.04%;
            border-radius: 0;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }

        /* 3. LINGKARAN (Bola Biru Besar di Bawah) */
        #spot-lingkaran {
            top: 76.2%; 
            left: 54.27%;
            width: 9.38%; 
            height: 16.67%;
            border-radius: 50%; /* Bulat sempurna */
        }

        /* 4. SEGI LIMA (Mainan Kayu di Bak Pasir Kiri Bawah) */
        #spot-segilima {
            top: 74.07%; 
            left: 35.94%;
            width: 7.81%; 
            height: 13.89%;
            border-radius: 1vw;
        }

        /* 5. PERSEGI PANJANG (Pintu Sekolah di Belakang) */
        #spot-persegipanjang {
            top: 23.15%; 
            left: 33.85%;
            width: 8.33%; 
            height: 18.52%;
            border-radius: 0.3vw;
        }

        /* ===========================
        GAME 4: DUEL SHOOTER
        =========================== */
        #view-game-duel {
            width: 100%; height: 100%; 
            position: absolute; top:0; left:0;
            background: url('assets/Background Tembak.png') no-repeat center center / 100% 100%; 
            overflow: hidden;
            touch-action: none; 
            user-select: none;  
            -webkit-user-select: none;
        }

        /* Area Sentuh (Garis Pembatas Tengah) */
        .duel-touch-zone {
            position: absolute; top: 0; bottom: 0; width: 50%;
            z-index: 5;
        }
        #p1-zone { left: 0; border-right: 0.2vw dashed rgba(255,255,255,0.3); }
        #p2-zone { right: 0; }

        /* HUD Skor */
        .duel-score-box {
            position: absolute; top: 2vh; 
            font-size: 3rem; font-family: 'Chewy'; color: white;
            z-index: 20; text-shadow: 0.2rem 0.2rem 0 #000;
            pointer-events: none;
        }
        #d-score1 { left: 2vw; color: #3498db; }
        #d-score2 { right: 2vw; color: #e74c3c; }

        /* Meriam / Pesawat */
        .duel-cannon {
            position: absolute; bottom: 2vh;
            width: 10vh; height: 10vh;
            z-index: 15;
            transform: translateX(-50%); 
        }

        /* Posisi Awal Pesawat */
        #cannon-p1 { left: 25%; }
        #cannon-p2 { left: 75%; }

        .duel-cannon img {
            width: 100%; height: 100%; object-fit: contain;
            filter: drop-shadow(0 0.5vh 0.5vh rgba(0,0,0,0.5));
        }

        /* Peluru */
        .bullet {
            position: absolute; 
            width: 0.8vw; height: 3.5vh;
            border-radius: 0.5vh; 
            z-index: 10;
            transform: translateX(-50%);
        }
        .bullet-p1 { 
            background: #4facfe; 
            box-shadow: 0 0 1.5vh #4facfe;
        }
        .bullet-p2 { 
            background: #ff5858; 
            box-shadow: 0 0 1.5vh #ff5858;
        }

        /* Target Jatuh */
        .duel-item {
            position: absolute; width: 8vh; height: 8vh;
            object-fit: contain; z-index: 14;
        }

        /* Efek Beku */
        .frozen { 
            filter: grayscale(100%) brightness(0.7); 
            opacity: 0.8; 
        }

        #duel-timer {
            position: absolute; top: 1.5vh; left: 50%; transform: translateX(-50%);
            font-family: 'Chewy', cursive; font-size: 4rem; 
            color: #FFD93D;
            text-shadow: 0.3rem 0.3rem 0 #000;
            z-index: 20;
            background: rgba(0,0,0,0.3);
            padding: 0 1.5vw;
            border-radius: 2vh;
        }
        
        /* --- PAGE: TUJUAN PEMBELAJARAN --- */
        #view-tujuan { width: 100%; height: 100%; position: absolute; top:0; left:0; z-index: 10; }
        
        .tujuan-box {
            position: absolute; 
            top: 50%; /* Posisi vertikal sedikit di bawah tengah */
            left: 80px; /* Jarak dari kiri layar */
            transform: translateY(-50%); /* Centering vertikal saja */
            
            background: rgba(255, 255, 255, 0.9); /* Putih agak transparan */
            padding: 40px;
            border-radius: 40px;
            border: 6px solid #FFD93D; /* List warna kuning */
            text-align: center;
            
            /* PENTING: Lebar dibatasi 40-45% agar tidak menabrak gambar Guru di kanan */
            width: 45%; 
            
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .tujuan-list {
            text-align: left;
            margin-top: 30px;
            font-size: 2rem;
            color: #555;
            line-height: 1.8;
        }
        
        .tujuan-icon {
            font-size: 5rem; margin-bottom: 20px; display: block;
        }


        /* --- TOMBOL LANJUT BELAJAR (ANIMASI) --- */
        .btn-lanjut {
            background: linear-gradient(to bottom, #2ecc71, #27ae60); /* Gradasi Hijau Segar */
            color: white;
            border: none;
            border-radius: 50px; /* Bentuk Kapsul */
            padding: 15px 50px;
            font-size: 2rem;
            font-family: 'Fredoka', sans-serif;
            font-weight: bold;
            cursor: pointer;
            margin-top: 30px;
            
            /* Efek 3D Tebal */
            box-shadow: 0 8px 0 #219150, 0 15px 20px rgba(0,0,0,0.2);
            transition: all 0.2s;
            
            /* Animasi Berdenyut */
            animation: pulse-green 2s infinite;
        }

        /* Efek saat Ditekan (Gepeng) */
        .btn-lanjut:active {
            transform: translateY(8px); /* Turun ke bawah */
            box-shadow: 0 0 0 #219150, inset 0 5px 10px rgba(0,0,0,0.2); /* Bayangan hilang */
        }

        /* Definisi Animasi Denyut */
        @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); } /* Membesar sedikit */
            100% { transform: scale(1); }
        }

        /* --- MATERI BARU: FIXED LAYOUT --- */
        #view-materi {
            width: 100%; height: 100%; 
            position: absolute; top:0; left:0;
            
            /* Background Kelas Papan Tulis */
            background: url('assets/Background Materi.png') no-repeat center center / 100% 100%;
            
            overflow: hidden;
        }

        /* Container Judul (Agar tidak menutupi konten) */
        .header-materi {
            position: absolute; top: 20px; width: 100%; text-align: center;
            z-index: 10;
        }

        /* Container Utama (BOX TENGAH) */
        .materi-container {
            position: absolute;
            /* Kita naikkan sedikit posisinya agar pas dengan papan tulis di gambar */
            top: 48%; left: 50%; 
            transform: translate(-50%, -50%);
            width: 95%; height: 75%; /* Lebih lebar agar menjangkau papan tulis */
            
            display: flex; 
            align-items: center; 
            justify-content: center;
        }

        .materi-slide { 
            display: none; 
            width: 100%; height: 100%; 
            animation: fadeIn 0.5s; 
        }
        
        /* Pastikan slide aktif pakai Flexbox biar kiri-kanan */
        .materi-slide.active { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 50px; 
        }

        /* KOLOM KIRI (TEKS) */
        .col-teks {
            flex: 1.1; /* Sedikit lebih lebar untuk area papan tulis */
            height: 80%;
            text-align: left;
            
            /* PENTING: Penyesuaian agar pas di Papan Tulis */
            padding: 20px 50px 20px 80px; /* Padding kiri besar agar tidak mepet bingkai */
            background: transparent; /* Transparan agar papan tulis terlihat */
            box-shadow: none; /* Hilangkan bayangan kotak */
            border: none; /* Hilangkan garis pinggir */
            
            /* Gaya Teks Kapur */
            color: #fff; /* Teks Putih */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5); /* Bayangan agar terbaca jelas */
            
            display: flex; flex-direction: column; justify-content: center;
        }
        .col-teks ul, .col-teks li, .col-teks p, .col-teks h2 {
            color: white !important;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.3);
        }
        .col-teks div {
            background: rgba(255,255,255,0.2) !important; /* Putih transparan tipis */
            border: 2px dashed rgba(255,255,255,0.5);
            color: white !important;
            width: fit-content;  /* Lebarnya hanya secukup teks saja */
            max-width: 70%;      /* Jaga-jaga agar tidak terlalu panjang */
            margin-top: 20px;
        }
        
        /* KOLOM KANAN (KUIS) */
        .col-kuis {
            flex: 0.9; /* Sisa area kanan */
            text-align: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding-right: 40px; /* Geser dikit biar ga mepet kanan */
        }

        /* --- UPDATE GRID KUIS (6 GAMBAR) --- */
        .quiz-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 Kolom */
            gap: 15px; /* Jarak antar kartu */
            margin-top: 10px;
            width: 100%;
            padding: 0 20px; /* Padding agar tidak mepet pinggir */
        }
        
        .quiz-card-small {
            background: white; 
            border-radius: 15px;
            border: 4px solid #fff;
            aspect-ratio: 1 / 1; /* Agar tetap kotak sempurna */
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            cursor: pointer; 
            transition: all 0.2s;
            overflow: hidden; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            position: relative;
        }

        .quiz-card-small:hover { transform: scale(1.08); border-color: #FFD93D; z-index: 5; }
        .quiz-card-small:active { transform: scale(0.95); }
        
        .quiz-card-small img { 
            width: 85%; height: 85%; 
            object-fit: contain; 
        }

        /* TOMBOL NAVIGASI (PANAH SAJA) */
        .btn-prev, .btn-next {
            position: absolute; bottom: 30px;
            width: 80px; height: 80px; border-radius: 50%;
            border: none; background: #2c3e50; color: white;
            font-size: 3rem; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 50; transition: transform 0.2s;
            display: flex; align-items: center; justify-content: center;
            padding-bottom: 10px; /* Biar panahnya pas di tengah visual */
        }
        .btn-prev:hover, .btn-next:hover { transform: scale(1.1); background: #34495e; }
        
        .btn-prev { left: 40px; }
        .btn-next { right: 40px; }

        /* --- MODAL FEEDBACK (BENAR/SALAH) --- */
        #feedback-modal {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.8); z-index: 200;
            display: flex; align-items: center; justify-content: center;
        }
        .feedback-box {
            background: white; width: 500px; padding: 40px;
            border-radius: 30px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            animation: popIn 0.3s;
        }

        /* --- CSS KHUSUS ASESMEN --- */
        .asesmen-slide {
            width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center;
            padding-top: 100px; /* Space for Header */
        }

        /* Tombol Lanjut */
        .btn-next-soal {
            margin-top: 20px;
            padding: 10px 40px;
            font-size: 2rem;
            font-family: 'Chewy';
            background: #3498db; color: white;
            border: none; border-radius: 50px;
            cursor: pointer; box-shadow: 0 5px 0 #2980b9;
        }
        .btn-next-soal:active { transform: translateY(5px); box-shadow: none; }

        /* Styles Halaman 1: Matching */
        .match-container {
            position: relative;
            width: 50%; height: 60%;
            display: flex; justify-content: space-between;
            background: rgba(255,255,255,0.8);
            border-radius: 30px; padding: 30px;
            border: 5px solid #fff;
        }
        #match-canvas {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1; /* DI BAWAH ITEM */
            pointer-events: none; /* PENTING: Tembus pandang bagi mouse */
        }
        .match-item.selected, .match-item-text.selected {
            border-color: #f1c40f;
            background-color: #fff9c4;
            transform: scale(1.05);
        }

        /* Item yang sudah punya pasangan (terkunci) */
        .match-item.locked, .match-item-text.locked {
            border-color: #3498db;
            background-color: #e8f6f3;
        }
        .grid-letter.marked { 
            background: #3498db; /* Biru Netral */
            color: white; 
        }
        .match-col {
            display: flex; flex-direction: column; justify-content: space-around;
            z-index: 5; width: 40%;
        }
        .match-item, .match-item-text {
            position: relative;
            background: white; 
            border-radius: 15px;
            padding: 1%; 
            border: 3px solid #ccc; /* Border default abu-abu */
            display: flex; align-items: center; justify-content: center;
            height: 80px;
            z-index: 10; /* LEBIH TINGGI DARI CANVAS */
            cursor: pointer;
            transition: all 0.2s;
        }
        .match-item img { height: 60px; object-fit: contain; }
        .match-item-text { font-size: 2rem; font-family: 'Fredoka'; background: #f0f0f0; }

        /* DOTS (Titik Sambung) */
        .dot {
            width: 20px; height: 20px; background: #34495e; border-radius: 50%;
            position: absolute; top: 50%; transform: translateY(-50%);
        }
        .right-dot { right: -40px; } /* Titik di kanan item kiri */
        .left-dot { left: -40px; }   /* Titik di kiri item kanan */

        /* Styles Halaman 2: Word Search */
        .word-search-grid {
            display: grid;
            grid-template-columns: repeat(12, 60px); /* 8 kolom */
            gap: 2px;
            background: #fff; padding: 10px; border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .grid-letter {
            width: 60px; height: 60px;
            background: #ecf0f1;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-family: 'Fredoka'; font-weight: bold;
            cursor: pointer; border-radius: 8px; user-select: none;
        }
        .grid-letter.selected { background: #f1c40f; color: white; transform: scale(1.1); }
        .grid-letter.found { background: #2ecc71; color: white; animation: popIn 0.3s; }

        .word-list-box {
            background: white; padding: 20px; border-radius: 20px;
            width: 300px; font-family: 'Fredoka';
        }
        .word-list-box ul { list-style: none; padding: 0; font-size: 2rem; }
        .word-list-box li.done { text-decoration: line-through; color: #2ecc71; }

        /* Styles Halaman 3: Quiz Scroll */
        .quiz-scroll-container {
            width: 80%; height: 40rem;
            overflow-y: auto;
            background: rgba(255,255,255,0.5);
            border-radius: 2rem;
            padding: 1%;
        }
        .quiz-card {
            background: white; padding: 20px; margin-bottom: 20px;
            border-radius: 20px; border-left: 10px solid #3498db;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1); text-align: left;
        }
        .quiz-card p { font-size: 1.8rem; margin: 0 0 15px 0; font-weight: bold; }
        .options button {
            display: block; width: 100%; text-align: left;
            padding: 10px 20px; margin: 5px 0;
            font-size: 1.5rem; border: 2px solid #ddd;
            background: #fff; border-radius: 10px; cursor: pointer;
        }
        .options button.selected { background: #d6eaf8; border-color: #3498db; font-weight: bold; }

        /* --- CSS TAMBAHAN UNTUK HALAMAN PROFILE PENGEMBANG --- */
        .dev-slide {
            width: 100%; height: 100%;
            position: absolute; top: 0; left: 0;
            display: flex; flex-direction: column; align-items: center;
            transition: opacity 0.3s;
        }

        /* --- UPDATE CSS PROFILE CARD --- */
        .profile-card {
            background: rgba(255, 255, 255, 0.95); /* Sedikit lebih solid */
            padding: 40px;
            border-radius: 40px;
            border: 6px solid #c92800; 
            text-align: center;
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            
            /* --- PENTING: POSISI DI LANGIT --- */
            position: absolute; 
            top: 15%;  /* Jarak dari atas (langit) */
            left: 4%; /* Jarak dari kiri (di atas sekolah) */
            width: 45%; /* Batasi lebar agar tidak menabrak murid di kanan */
            max-width: 800px;
            
            /* Animasi masuk */
            animation: floatIn 1s ease-out;
        }

        @keyframes floatIn {
            0% { transform: translateY(-50px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .dev-photo {
            width: 200px; /* Ukuran Foto Tidak Terlalu Besar */
            height: 200px;
            border-radius: 50%; /* Bulat */
            object-fit: cover;
            border: 5px solid #3498db;
            margin-bottom: 20px;
            background-color: #eee; /* Placeholder warna jika foto belum ada */
        }

        .dev-name {
            font-family: 'Chewy', cursive;
            font-size: 3rem;
            color: #2c3e50;
            margin: 10px 0;
        }

        .dev-unit {
            font-family: 'Fredoka', sans-serif;
            font-size: 1.8rem;
            color: #7f8c8d;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .social-links {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-top: 20px;
        }

        .btn-social {
            display: flex; align-items: center; gap: 10px;
            text-decoration: none;
            font-size: 1.5rem;
            font-weight: bold;
            color: #3498db;
            background: #eaf2f8;
            padding: 10px 20px;
            border-radius: 30px;
            transition: transform 0.2s;
        }
        .btn-social:hover { transform: scale(1.1); background: #d4e6f1; }

        .icon-sosmed {
            width: 50px; height: 50px;
            object-fit: contain;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .icon-sosmed:hover { transform: scale(1.2); }

        /* --- TOMBOL HASIL AKHIR (BESAR & EMPUK) --- */
        .btn-result {
            font-family: 'Chewy', cursive;
            font-size: 2.5rem;       /* Teks Besar */
            padding: 15px 50px;      /* Tombol Gemuk */
            border-radius: 50px;     /* Bulat Lonjong (Kapsul) */
            border: 5px solid #fff;  /* List Putih Tebal */
            cursor: pointer;
            color: white;
            
            /* Efek 3D Bayangan */
            box-shadow: 0 10px 0 rgba(0,0,0,0.2), 0 10px 20px rgba(0,0,0,0.2);
            transition: all 0.1s;
            
            display: flex; align-items: center; gap: 10px; /* Ikon & Teks Rapi */
        }

        /* Efek Tekan (Gepeng) */
        .btn-result:active {
            transform: translateY(10px); /* Turun ke bawah */
            box-shadow: 0 0 0 rgba(0,0,0,0.2), inset 0 5px 10px rgba(0,0,0,0.2);
        }

        /* Hover Efek */
        .btn-result:hover {
            transform: scale(1.05) translateY(-5px);
            filter: brightness(1.1);
        }

        /* Warna Khusus Tombol Ulangi (Oranye) */
        .btn-retry {
            background: linear-gradient(to bottom, #f39c12, #d35400);
            box-shadow: 0 10px 0 #a04000, 0 15px 20px rgba(0,0,0,0.2); /* Bayangan Lantai */
        }
        .btn-retry:active { box-shadow: 0 0 0 #a04000; }

        /* Warna Khusus Tombol Menu (Biru) */
        .btn-menu-end {
            background: linear-gradient(to bottom, #3498db, #2980b9);
            box-shadow: 0 10px 0 #1c5980, 0 15px 20px rgba(0,0,0,0.2); /* Bayangan Lantai */
        }
        .btn-menu-end:active { box-shadow: 0 0 0 #1c5980; }
        /* Animations */
        @keyframes sway-gentle { 0%, 100% { transform: rotate(-2deg); } 50% { transform: rotate(1deg); } }
        @keyframes popIn { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        @keyframes pulse-btn { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .floating-shape { position: absolute; opacity: 0.6; z-index: 2; animation: floatUp linear infinite; pointer-events: none; }
        @keyframes floatUp { 0% { transform: translateY(1100px) rotate(0deg); opacity: 0; } 100% { transform: translateY(-100px) rotate(360deg); opacity: 0; } }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="decor-layer"></div>
        
        <div class="footer-info">
            <img src="assets/Logo Giat SD.png" alt="Logo Giat SD" class="footer-logo">
            <span>Direktorat SD</span>
        </div>

        <div id="view-cover">
            <img src="assets/Anak SD Cover.png" class="hero-image" alt="Siswa SD">
            <div class="content-wrapper">
                <div class="badge-class">SENI RUPA FASE A</div>
                <h1 class="main-title">MENGENAL<br><span class="title-part-2">BIDANG</span></h1>
                <button class="btn-start-cover" onclick="switchPage('menu')">MULAI ‚ñ∂</button>
            </div>
        </div>

        <div id="view-menu" class="hidden">
            <div class="header-bar"><h2 class="page-title">MENU UTAMA</h2></div>
            
            <div style="position: absolute; top: 42%; left: 50%; transform: translate(-50%, -50%); width: 60%; display: flex; flex-direction: column; align-items: center;">
                
                <div style="display:flex; gap: 30px; margin-bottom: 30px;">
                    <div class="btn-menu-main btn-tujuan" onclick="switchPage('tujuan')" style="width: 280px;">
                        <span>üéØ</span> Tujuan
                    </div>
                    
                    <div class="btn-menu-main btn-materi" onclick="switchPage('materi')" style="width: 280px;">
                        <span>üìñ</span> Materi
                    </div>
                    
                    <div class="btn-menu-main btn-video" onclick="switchPage('video')" style="width: 280px;">
                        <span>üé¨</span> Berkarya
                    </div>
                </div>

                <div style="display:flex; gap: 30px;">
                    <div class="btn-menu-main btn-games" onclick="switchPage('game-menu')" style="width: 280px;">
                        <span>üéÆ</span> Games
                    </div>

                    <div class="btn-menu-main btn-asesmen" onclick="switchPage('asesmen')" style="width: 280px;">
                        <span>üìù</span> Asesmen
                    </div>

                    <div class="btn-menu-main btn-dev" onclick="switchPage('dev')" style="width: 280px;">
                        <span>üë®‚Äçüíª</span> Pengembang
                    </div>
                </div>

            </div>
        </div>

        <div id="view-tujuan" class="hidden">
            <button class="btn-home" onclick="switchPage('menu')">üè† MENU</button>
            
            <div class="tujuan-box">
                <span class="tujuan-icon">üéØ</span>
                <h1 style="font-family:'Chewy'; font-size:4rem; color:#FF6F61; margin:0;">TUJUAN PEMBELAJARAN</h1>
                
                <div class="tujuan-list">
                    <p>Setelah kegiatan ini, kamu akan bisa:</p>
                    <ul style="list-style-type: none; padding: 0;">
                        <li>‚úÖ Mengenal bentuk yang <strong>rapi (beraturan)</strong>.</li>
                        <li>‚úÖ Mengenal bentuk yang <strong>bebas (tak beraturan)</strong>.</li>
                        <li>‚úÖ <strong>Mengelompokkan</strong> benda sesuai jenisnya.</li>
                    </ul>
                </div>

                <button class="btn-lanjut" onclick="switchPage('materi')">
                    LANJUT BELAJAR üöÄ
                </button>
            </div>
        </div>

        <div id="view-materi" class="hidden">
            <button class="btn-home" onclick="switchPage('menu')">üè† MENU</button>
            
            <div class="header-materi">
                <h2 class="page-title" id="materi-title" style="display:inline-block; background:white; padding:10px 40px; border-radius:30px; box-shadow:0 5px 15px rgba(0,0,0,0.1);">Mengenal Bentuk</h2>
            </div>

            <div class="materi-container">
                
                <div id="slide-1" class="materi-slide active">
                    <div class="col-teks" style="border-left-color: #3498db;">
                        <h2 class="blue-text" style="font-size: 2.5rem; margin-bottom: 15px;">A. Bidang Beraturan</h2>
                        <p style="font-size: 1.6rem; line-height: 1.4; margin-bottom: 15px;">
                            Benda ini terlihat rapi. Ciri-cirinya:
                        </p>
                        <ul style="font-size: 1.5rem; margin-left: 20px; line-height: 1.6; color: #555;">
                            <li>Garisnya <strong>lurus</strong> atau lengkung sempurna.</li>
                            <li>Sudutnya jelas.</li>
                            <li>Bisa diukur dengan alat tulis.</li>
                        </ul>
                        <div style="margin-top: 20px; background: #eaf2f8; padding: 15px; border-radius: 15px; font-size: 1.5rem;">
                            üëá <strong>Tugas:</strong> Ketuk 3 Gambar yang <strong>BERATURAN!</strong>
                        </div>
                    </div>

                    <div class="col-kuis">
                        
                        <div style="margin-bottom: 20px; background: white; padding: 10px 30px; border-radius: 50px; border: 4px solid #3498db; box-shadow: 0 5px 10px rgba(0,0,0,0.1); animation: pulse-btn 2s infinite;">
                            <h3 style="margin:0; font-family:'Chewy'; font-size: 2rem; color:#3498db;">üëá Pilih 3 Benda BERATURAN!</h3>
                        </div>
                        <div class="quiz-grid">
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! üü©', 'Persegi (segiempat) adalah bentuk beraturan karena memiliki 4 sisi lurus yang sama panjang.')">
                                <img src="assets/persegi.png" alt="Persegi">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... üçÉ', 'Daun adalah bentuk tidak beraturan karena garis tepinya melengkung bebas dan alami.')">
                                <img src="assets/daun.png" alt="Daun">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! üî∫', 'Segitiga adalah bentuk beraturan karena dibuat dari 3 garis lurus yang saling menyambung.')">
                                <img src="assets/segitiga.png" alt="Segitiga">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... ‚òÅÔ∏è', 'Awan adalah bentuk tidak beraturan karena bentuknya selalu berubah-ubah tertiup angin.')">
                                <img src="assets/awan.png" alt="Awan">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! üîµ', 'Lingkaran adalah bentuk beraturan karena memiliki garis lengkung yang sempurna dan simetris.')">
                                <img src="assets/lingkaran.png" alt="Lingkaran">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... üå≥', 'Pohon adalah bentuk tidak beraturan karena tumbuh alami, rantingnya bercabang bebas.')">
                                <img src="assets/pohon.png" alt="Pohon">
                            </div>
                        </div>
                    </div>
                </div>

                <div id="slide-2" class="materi-slide">
                    <div class="col-teks" style="border-left-color: #e74c3c;">
                        <h2 class="red-text" style="font-size: 2.5rem; margin-bottom: 15px;">B. Bidang Tak Beraturan</h2>
                        <p style="font-size: 1.6rem; line-height: 1.4; margin-bottom: 15px;">
                            Bentuk ini sifatnya bebas. Ciri-cirinya:
                        </p>
                        <ul style="font-size: 1.5rem; margin-left: 20px; line-height: 1.6; color: #555;">
                            <li>Garisnya bebas (keriting/bergelombang).</li>
                            <li>Tidak kaku.</li>
                            <li>Biasanya benda-benda alam.</li>
                        </ul>
                        <div style="margin-top: 20px; background: #fadbd8; padding: 15px; border-radius: 15px; font-size: 1.5rem;">
                            üëá <strong>Tugas:</strong> Ketuk 3 Gambar yang <strong>TAK BERATURAN!</strong>
                        </div>
                    </div>

                    <div class="col-kuis">
                        <div style="margin-bottom: 20px; background: white; padding: 10px 30px; border-radius: 50px; border: 4px solid #db3434; box-shadow: 0 5px 10px rgba(0,0,0,0.1); animation: pulse-btn 2s infinite;">
                            <h3 style="margin:0; font-family:'Chewy'; font-size: 2rem; color:#db3434;">üëá Pilih 3 Benda TIDAK BERATURAN!</h3>
                        </div>
                        <div class="quiz-grid">
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... üü©', 'Persegi itu bentuk beraturan. Lihat, garisnya lurus dan rapi sekali.')">
                                <img src="assets/persegi.png" alt="Persegi">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! üçÉ', 'Daun adalah bentuk tidak beraturan karena tepi daunnya bergerigi atau melengkung bebas.')">
                                <img src="assets/daun.png" alt="Daun">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... üî∫', 'Segitiga punya sudut lancip yang jelas, jadi dia termasuk bentuk beraturan.')">
                                <img src="assets/segitiga.png" alt="Segitiga">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! ‚òÅÔ∏è', 'Awan adalah bentuk tidak beraturan. Cobalah menggambarnya, pasti garisnya bebas kan?')">
                                <img src="assets/awan.png" alt="Awan">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(false, 'Kamu Salah... üîµ', 'Lingkaran itu bulat sempurna dan rapi, jadi dia termasuk bentuk beraturan.')">
                                <img src="assets/lingkaran.png" alt="Lingkaran">
                            </div>
                            <div class="quiz-card-small" onclick="showFeedback(true, 'Kamu Benar! üå≥', 'Pohon adalah bentuk tidak beraturan. Batang dan daunnya tumbuh ke segala arah.')">
                                <img src="assets/pohon.png" alt="Pohon">
                            </div>
                        </div>
                    </div>
                </div>
                </div>

            <button class="btn-prev" onclick="changeMateriSlide(-1)">‚¨Ö</button>
            <button class="btn-next" onclick="changeMateriSlide(1)">‚û°</button>

            <div id="feedback-modal" class="hidden" onclick="closeFeedback()">
                <div class="feedback-box" onclick="event.stopPropagation()">
                    <div id="fb-icon" style="font-size: 5rem; margin-bottom: 20px;">ü§î</div>
                    <h2 id="fb-title" style="font-family:'Chewy'; font-size:3rem; margin-bottom:15px;">Judul</h2>
                    <p id="fb-message" style="font-size: 1.5rem; color:#555; line-height: 1.6;">Pesan</p>
                    <button class="btn-start-action" style="margin-top: 30px; font-size: 1.5rem;" onclick="closeFeedback()">OK, LANJUT! üëç</button>
                </div>
            </div>
        </div>

        <div id="view-video" class="hidden">
            <button class="btn-home" onclick="switchPage('menu')">üè† MENU</button>
            <div class="header-bar"><h2 class="page-title">üé¨ Mari Berkarya!</h2></div>
            <div class="video-wrapper">
                <div class="tv-antenna"></div>
                <video id="mainVideo" class="video-screen" controls>
                    <source src="assets/Video Pembelajaran Bidang.mp4" type="video/mp4">
                    Browser tidak support video.
                </video>
            </div>
        </div>

        <div id="view-game-menu" class="hidden">
            <button class="btn-home" onclick="switchPage('menu')">üè† MENU</button>
            <div class="header-bar"><h2 class="page-title">PILIH PERMAINAN</h2></div>
            
            <div class="game-selection-container">
                <div class="btn-game-select" onclick="switchPage('game-drag')" style="border-color: #3498db; color: #3498db;">
                    <div class="icon-game">üß©</div>
                    <h3>KELOMPOK</h3>
                </div>
                <div class="btn-game-select" onclick="switchPage('game-rain')" style="border-color: #2ecc71; color: #2ecc71;">
                    <div class="icon-game">üåßÔ∏è</div>
                    <h3>HUJAN</h3>
                </div>
                <div class="btn-game-select" onclick="switchPage('game-seek')" style="border-color: #9b59b6; color: #9b59b6;">
                    <div class="icon-game">üîç</div>
                    <h3>MENCARI</h3>
                </div>
                <div class="btn-game-select" onclick="switchPage('game-duel')" style="border-color: #b65959; color: #b65959;">
                    <div class="icon-game">üöÄ</div>
                    <h3>TEMBAK</h3>
                </div>
            </div>
        </div>

        <div id="view-game-drag" class="hidden">
            <button class="btn-home" onclick="switchPage('game-menu')">‚Ü© KEMBALI</button>
            <div class="header-bar"><h2 class="page-title">Kelompokkan Bidang Ini!</h2></div>
            <div class="game-board">
                <div class="drop-zone-container">
                    <div class="drop-zone zone-beraturan" data-target="type-beraturan" ondragover="allowDrop(event)" ondrop="drop(event)">
                        <h3>Beraturan</h3>
                    </div>
                    <div class="drop-zone zone-tak-beraturan" data-target="type-tak-beraturan" ondragover="allowDrop(event)" ondrop="drop(event)">
                        <h3>Tak Beraturan</h3>
                    </div>
                </div>
                <div class="item-tray" id="item-tray">
                    <img src="assets/persegi.png" id="item1" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                    <img src="assets/pohon.png" id="item2" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/segitiga.png" id="item3" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                    <img src="assets/sepatu.png" id="item4" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/awan.png" id="item5" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/daun.png" id="item6" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/batu.png" id="item7" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/air.png" id="item8" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-tak-beraturan">
                    <img src="assets/jamdinding.png" id="item9" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                    <img src="assets/layang-layang.png" id="item10" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                    <img src="assets/buku.png" id="item11" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                    <img src="assets/uangkoin.png" id="item12" class="draggable-item" draggable="true" ondragstart="drag(event)" data-type="type-beraturan">
                </div>
            </div>
            <div id="win-message" class="hidden">
                <div class="win-box">
                    <h1>HEBAT! üéâ</h1>
                    <p style="font-size: 2rem; color: #555;">Kamu berhasil mengelompokkan semua bidang!</p>
                    
                    <button class="btn-victory" onclick="switchPage('game-menu')">
                        SELESAI üè†
                    </button>
                    </div>
            </div>
        </div>

        <div id="view-game-rain" class="hidden">
            <button class="btn-home" onclick="switchPage('game-menu')">‚Ü© KEMBALI</button>
            
            <div class="hud-rain">
                <div class="score-box">SKOR: <span id="score-rain">0</span></div>
                <div class="mission-box"><h2 class="page-title" style="text-align: center;">Tangkap Bidang Tidak Beraturan!</h2></div>
                <div class="life-box">NYAWA: <span id="life-rain">3</span> ‚ù§Ô∏è</div>
            </div>

            <div id="start-rain-overlay" style="position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:60; display:flex; flex-direction:column; align-items:center; justify-content:center;">
                <h1 style="color:white; font-family:'Chewy'; font-size:4rem;">TANGKAP BIDANG TAK BERATURAN!</h1>
                <p style="color:#eee; font-size:2rem; margin-bottom:40px;">Awas! Jangan tangkap bidang beraturan ya!</p>
                <button class="btn-start-action" onclick="startGameRain()">MULAI MAIN ‚ñ∂</button>
            </div>

            <div class="rain-area" id="rain-area">
                <div id="player-bucket"></div>
            </div>
            
            <div id="game-over-screen" class="hidden">
                <h1 id="end-title" style="color:#FF6F61; font-family:'Chewy'; font-size:6rem; -webkit-text-stroke: 4px white;">PERMAINAN SELESAI</h1>
                <h2 style="color:white; font-size:3rem; font-family:'Fredoka';">Skor Akhir: <span id="final-score">0</span></h2>
                <div style="display:flex; gap:20px; margin-top:30px;">
                    <button class="btn-start-action" onclick="startGameRain()">MAIN LAGI üîÑ</button>
                    <button class="btn-nav btn-back" style="position:relative; bottom:0; left:0;" onclick="switchPage('game-menu')">KELUAR üè†</button>
                </div>
            </div>
        </div>

        <div id="view-game-seek" class="hidden">
            <button class="btn-home" onclick="switchPage('game-menu')">‚Ü© KEMBALI</button>
            <div class="hud-rain">
                <div class="score-box">DITEMUKAN: <span id="seek-count">0</span>/5</div>
                <div class="mission-box"><h2 class="page-title" style="text-align: center;">Temukan bentuk beraturan pada gambar ini!</h2></div>
            </div>
            <div class="seek-area">
                <div id="spot-persegi" class="hitbox" onclick="foundHitbox(this, 'PERSEGI!')"></div>
                <div id="spot-segitiga" class="hitbox" onclick="foundHitbox(this, 'SEGITIGA!')"></div>
                <div id="spot-lingkaran" class="hitbox" onclick="foundHitbox(this, 'LINGKARAN!')"></div>
                <div id="spot-segilima" class="hitbox" onclick="foundHitbox(this, 'SEGI LIMA!')"></div>
                <div id="spot-persegipanjang" class="hitbox" onclick="foundHitbox(this, 'PERSEGI PANJANG!')"></div>
            </div>
            <div id="found-label">NAMA BENTUK</div>
            <div id="seek-win-message" class="hidden">
                <div class="win-box">
                    <h1>LUAR BIASA! üîç</h1>
                    <p style="font-size: 2rem; color: #555;">Kamu menemukan semua bentuk tersembunyi!</p>
                    <button class="btn-victory" onclick="switchPage('game-menu')">
                        SELESAI üè†
                    </button>
                    </div>
            </div>
        </div>

        <div id="view-game-duel" class="hidden">
            <button style="position: absolute; left: 50%; transform: translateX(-50%); top: 20px; z-index: 100;" class="btn-home" onclick="switchPage('game-menu')">‚Ü© KEMBALI</button>
            <div id="duel-timer">60</div>
            <div id="d-score1" class="duel-score-box">P1: 0</div>
            <div id="d-score2" class="duel-score-box">P2: 0</div>

            <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:rgba(255,255,255,0.1); font-size:8rem; font-weight:bold; z-index:0;">VS</div>

            <div style="position:absolute; top:100px; left:25%; transform:translateX(-50%); color:#3498db; font-weight:bold; font-size:1.5rem; text-align:center; z-index:5; text-shadow: 1px 1px 0 #000;">
                TEMBAK BENDA<br>BERATURAN!
            </div>

            <div style="position:absolute; top:100px; left:75%; transform:translateX(-50%); color:#e74c3c; font-weight:bold; font-size:1.5rem; text-align:center; z-index:5; text-shadow: 1px 1px 0 #000;">
                TEMBAK BENDA<br>TAK BERATURAN!
            </div>
            <div id="p1-zone" class="duel-touch-zone"></div>
            <div id="p2-zone" class="duel-touch-zone"></div>

            <div id="cannon-p1" class="duel-cannon">
                <img src="assets/Pesawat Beraturan.png" style="width:100%; height:100%; object-fit:contain;">
            </div>
            <div id="cannon-p2" class="duel-cannon">
                <img src="assets/Pesawat Tak Beraturan.png" style="width:100%; height:100%; object-fit:contain;">
            </div>

            <div id="duel-area"></div>

            <div id="duel-win-screen" class="hidden" style="position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:200; display:flex; flex-direction:column; align-items:center; justify-content:center;">
                <h1 id="duel-winner-text" style="color:#FFD93D; font-family:'Chewy'; font-size:5rem;">PEMENANGNYA...</h1>
                <button class="btn-start-action" onclick="startDuelGame()">MAIN LAGI üîÑ</button>
                <button class="btn-nav btn-back" style="position:relative; margin-top:20px; bottom:0; left:0;" onclick="switchPage('game-menu')">KELUAR üè†</button>
            </div>
        </div>

        <div id="view-asesmen" class="hidden force-full-bg">
            <button class="btn-home" onclick="if(confirm('Keluar? Skor akan hilang.')) switchPage('menu')">üè† MENU</button>

            <div style="position:absolute; top:30px; left:50%; transform:translateX(-50%); width:60%; background:rgba(255,255,255,0.5); border-radius:20px; padding:10px; z-index:50;">
                <div style="display:flex; justify-content:space-between; font-family:'Chewy'; font-size:1.5rem; color:#555;">
                    <span id="label-step-1" style="color:#d35400">1. Hubungkan</span>
                    <span id="label-step-2">2. Cari Kata</span>
                    <span id="label-step-3">3. Kuis</span>
                </div>
                <div style="width:100%; height:10px; background:#fff; border-radius:10px; margin-top:5px; overflow:hidden;">
                    <div id="progress-bar" style="width:33%; height:100%; background:#2ecc71; transition:width 0.5s;"></div>
                </div>
            </div>

            <div id="asesmen-p1" class="asesmen-slide">
                <h2 class="page-title" style="font-size: 2.5rem;">Pasangkan Gambarnya!</h2>
                <p style="font-size:1.5rem; color:#555; margin-bottom:10px;">Klik Gambar Kiri (Kuning), Lalu Klik Tulisan Kanan.</p>

                <div class="match-container">
                    <canvas id="match-canvas"></canvas>
                    
                    <div class="match-col" id="col-left">
                        <div class="match-item" data-id="m1" onclick="handleMatchClick('left', this)">
                            <img src="assets/persegi.png" alt="Persegi">
                        </div>
                        <div class="match-item" data-id="m2" onclick="handleMatchClick('left', this)">
                            <img src="assets/daun.png" alt="Daun">
                        </div>
                        <div class="match-item" data-id="m3" onclick="handleMatchClick('left', this)">
                            <img src="assets/segitiga.png" alt="Segitiga">
                        </div>
                        <div class="match-item" data-id="m4" onclick="handleMatchClick('left', this)">
                            <img src="assets/awan.png" alt="Awan">
                        </div>
                        <div class="match-item" data-id="m5" onclick="handleMatchClick('left', this)">
                            <img src="assets/lingkaran.png" alt="Lingkaran">
                        </div>
                    </div>

                    <div class="match-col" id="col-right">
                        <div class="match-item-text" data-match="m4" onclick="handleMatchClick('right', this)">
                            <span>Awan</span>
                        </div>
                        <div class="match-item-text" data-match="m1" onclick="handleMatchClick('right', this)">
                            <span>Persegi</span>
                        </div>
                        <div class="match-item-text" data-match="m2" onclick="handleMatchClick('right', this)">
                            <span>Daun</span>
                        </div>
                        <div class="match-item-text" data-match="m5" onclick="handleMatchClick('right', this)">
                            <span>Lingkaran</span>
                        </div>
                        <div class="match-item-text" data-match="m3" onclick="handleMatchClick('right', this)">
                            <span>Segitiga</span>
                        </div>
                    </div>
                </div>
                <button class="btn-next-soal" onclick="nextAsesmenStep(2)">LANJUT ‚ñ∂</button>
                <button class="btn-next" style="position: absolute; bottom: 50px; right: 50px;" onclick="nextAsesmenStep(2)">‚û°</button>
            </div>

            <div id="asesmen-p2" class="asesmen-slide hidden">
                <h2 class="page-title" style="font-size: 2.5rem;">Cari 5 Kata Benda TAK BERATURAN!</h2>
                
                <div style="display:flex; flex-direction:column; align-items:center; gap:15px; margin-top:10px;">
                    
                    <div style="background: rgba(255, 255, 255, 0.9); padding: 10px 25px; border-radius: 20px; border: 3px solid #3498db; max-width: 600px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
                        <p style="margin:0; font-size: 1.4rem; color: #2c3e50; font-family: 'Fredoka', sans-serif;">
                            üí° <b>Caranya:</b> Klik huruf-huruf untuk menyusun kata, lalu tekan tombol <b>"TANDAI KATA"</b>.
                        </p>
                    </div>

                    <div id="word-grid" class="word-search-grid"></div>

                    <div style="display:flex; gap: 15px;">
                        <button class="btn-game" style="font-size:1.5rem; padding:10px 30px; background:#f39c12;" onclick="saveSelectedWord()">TANDAI KATA üìå</button>
                        <button class="btn-game" style="font-size:1.5rem; padding:10px 30px; background:#e74c3c;" onclick="fullResetWordSearch()">BATAL ‚ùå</button>
                    </div>

                    <p style="font-size:1.5rem; color:#555; text-align:center;">
                        Kata yang ditandai: <span id="count-found" style="font-weight:bold; color:#d35400;">0</span>/5
                    </p>
                </div>
                
                <div id="btn-next-wordsearch" class="hidden" style= position:relative; z-index: 55;>
                    <button class="btn-next-soal" onclick="nextAsesmenStep(3)">LANJUT KE KUIS ‚ñ∂</button>
                </div>
                <button class="btn-next" style="position: absolute; bottom: 50px; left: 50px;" onclick="nextAsesmenStep(1)">‚¨Ö</button>
                <button class="btn-next" style="position: absolute; bottom: 50px; right: 50px;" onclick="nextAsesmenStep(3)">‚û°</button>
            </div>

            <div id="asesmen-p3" class="asesmen-slide hidden">
                <h2 class="page-title" style="font-size: 2.5rem;">Pilih Jawaban yang Benar!</h2>
                
                <div class="quiz-scroll-container">
                    <div class="quiz-card">
                        <p>1. Manakah yang termasuk bidang beraturan?</p>
                        <div class="options">
                            <button onclick="selectOption(1, 'A', this)">A. Awan</button>
                            <button onclick="selectOption(1, 'B', this)">B. Persegi</button>
                            <button onclick="selectOption(1, 'C', this)">C. Batu</button>
                        </div>
                    </div>
                    <div class="quiz-card">
                        <p>2. Ciri-ciri bidang tak beraturan adalah...</p>
                        <div class="options">
                            <button onclick="selectOption(2, 'A', this)">A. Garisnya lurus dan kaku</button>
                            <button onclick="selectOption(2, 'B', this)">B. Mudah diukur</button>
                            <button onclick="selectOption(2, 'C', this)">C. Bentuknya bebas/alami</button>
                        </div>
                    </div>
                    <div class="quiz-card">
                        <p>3. Alat musik Triangle berbentuk...</p>
                        <div class="options">
                            <button onclick="selectOption(3, 'A', this)">A. Segitiga</button>
                            <button onclick="selectOption(3, 'B', this)">B. Lingkaran</button>
                            <button onclick="selectOption(3, 'C', this)">C. Kotak</button>
                        </div>
                    </div>
                    <div class="quiz-card">
                        <p>4. Benda alam seperti air yang tumpah memiliki bentuk...</p>
                        <div class="options">
                            <button onclick="selectOption(4, 'A', this)">A. Beraturan</button>
                            <button onclick="selectOption(4, 'B', this)">B. Tak Beraturan</button>
                            <button onclick="selectOption(4, 'C', this)">C. Kotak</button>
                        </div>
                    </div>
                    <div class="quiz-card">
                        <p>5. Jendela kelas biasanya berbentuk...</p>
                        <div class="options">
                            <button onclick="selectOption(5, 'A', this)">A. Persegi Panjang</button>
                            <button onclick="selectOption(5, 'B', this)">B. Lingkaran</button>
                            <button onclick="selectOption(5, 'C', this)">C. Segitiga</button>
                        </div>
                    </div>
                </div>
                <button class="btn-next" style="position: absolute; bottom: 50px; left: 50px;" onclick="nextAsesmenStep(2)">‚¨Ö</button>
                <button class="btn-start-action" style="margin-top:20px;" onclick="finishAsesmen()">LIHAT HASIL üèÅ</button>
            </div>

            <div id="asesmen-result" class="asesmen-slide hidden" style="text-align:center;">
                <h1 style="font-family:'Chewy'; font-size:4rem; color:#2c3e50;">HASIL BELAJAR KAMU</h1>
                
                <div style="background:white; width:60%; margin:0 auto; padding:40px; border-radius:40px; border:8px solid #FFD93D;">
                    <div style="font-size:2rem;">NILAI AKHIR:</div>
                    <div id="final-score-text" style="font-size:8rem; font-family:'Chewy'; color:#27ae60; line-height:1;">0</div>
                    
                    <div style="text-align:left; margin-top:30px; height:200px; overflow-y:auto; background:#f9f9f9; padding:20px; border-radius:20px;">
                        <ul id="feedback-list" style="font-size:1.5rem; color:#e74c3c;"></ul>
                        <div id="perfect-msg" class="hidden" style="color:#27ae60; font-size:2rem; font-weight:bold; text-align:center;">
                            Wah! Kamu Benar Semua! Sempurna! üåü
                        </div>
                    </div>
                </div>

                <div style="margin-top:1%; display:flex; gap:30px; justify-content:center;">
                    <button class="btn-result btn-retry" onclick="resetAsesmen()">
                        <span>üîÑ</span> ULANGI TES
                    </button>
                    
                    <button class="btn-result btn-menu-end" onclick="switchPage('menu')">
                        <span>üè†</span> MENU UTAMA
                    </button>
                </div>
            </div>
        </div>

        <div id="view-dev" class="hidden">
            <button class="btn-home" style="top: 20px; left: 20px; z-index: 100;" onclick="switchPage('menu')">üè† MENU</button>

            <div id="dev-slide-1" class="dev-slide">
                <div class="dev-page-container">
                    <img src="assets/Logo Tut Wuri Handayani.png" class="dev-logo-top" alt="Logo">

                    <div class="dev-header">
                        <div class="dev-h2">DIREKTORAT SEKOLAH DASAR</div>
                        <div class="dev-h3">DIREKTORAT JENDERAL PENDIDIKAN ANAK USIA DINI, PENDIDIKAN DASAR, DAN PENDIDIKAN MENENGAH</div>
                        <div class="dev-h2">KEMENTERIAN PENDIDIKAN DASAR DAN MENENGAH</div>
                    </div>

                    <div class="orange-line"></div>

                    <div class="credits-grid">
                        <div class="c-label">Pengarah</div><div class="c-sep">:</div>
                        <div class="c-val">Moch. Salim Somad, S.Kom., M.Pd., Direktorat Sekolah Dasar</div>

                        <div class="c-label">Penanggung Jawab</div><div class="c-sep">:</div>
                        <div class="c-val">Lanny Anggraini, S.Pd., M.A., Direktorat Sekolah Dasar</div>

                        <div class="c-label">Pengembang</div><div class="c-sep">:</div>
                        <div class="c-val">Didik Rahmadi, S.Pd.</div>

                        <div class="c-label">Pengkaji Materi</div><div class="c-sep">:</div>
                        <div class="c-val">Bintang Adhi Permana, M.Pd.</div>

                        <div class="c-label">Pengkaji Media</div><div class="c-sep">:</div>
                        <div class="c-val">
                            1. Muh. Noor Ginanjar Jaelani, S.Pd., Direktorat Sekolah Dasar<br>
                            2. Ine Rahmawati, S.Pd., M.Si., Direktorat Sekolah Dasar
                        </div>

                        <div style="height: 20px;"></div><div style="height: 20px;"></div><div style="height: 20px;"></div>

                        <div class="c-label">Diterbitkan oleh:</div><div class="c-sep">:</div>
                        <div class="c-val">
                            Direktorat Sekolah Dasar<br>
                            Direktorat Jenderal Pendidikan Anak Usia Dini, Pendidikan Dasar, dan Pendidikan Menengah<br>
                            Kementerian Pendidikan Dasar dan Menengah<br>
                            Tahun 2025
                        </div>
                    </div>
                    
                    <div class="dev-blue-line"></div>
                    
                    <button class="btn-next" style="position: absolute; bottom: 50px; right: 50px;" onclick="switchDevSlide(2)">‚û°</button>
                </div>
            </div>

            <div id="dev-slide-2" class="dev-slide hidden">
                <div class="profile-card">
                    <img src="assets/Foto Pengembang.jpg" class="dev-photo" alt="Foto Pengembang">
                    
                    <h2 class="dev-name">Didik Rahmadi, S.Pd.</h2>
                    <div class="dev-unit">SDN Pejaten Timur 11</div>
                    
                    <div style="width: 100%; height: 4px; background: #eee; margin: 20px 0;"></div>

                    <div class="social-links">
                        <a href="https://didik-rahmadi.github.io/cv/" target="_blank" class="btn-social">
                            üåê Website
                        </a>

                        <a href="https://instagram.com/didik.rahmadi" target="_blank">
                            <img src="assets/logo_ig.png" class="icon-sosmed" alt="Instagram">
                        </a>
                    </div>
                </div>

                <button class="btn-prev" style="position: absolute; bottom: 50px; left: 50px;" onclick="switchDevSlide(1)">‚¨Ö</button>
            </div>
        </div>

    </div>

    <script>
        // 1. AUTO SCALE
        function scaleContainer() {
            const container = document.getElementById('game-container');
            const windowWidth = window.innerWidth;
            const windowHeight = window.innerHeight;
            
            const targetWidth = 1920;
            const targetHeight = 1080;

            // Hitung skala berdasarkan sisi mana yang lebih "sempit"
            const scale = Math.min(windowWidth / targetWidth, windowHeight / targetHeight);

            // Terapkan Transform
            container.style.transform = `scale(${scale})`;
            
            // Paksa ukuran
            container.style.width = targetWidth + "px";
            container.style.height = targetHeight + "px";
        }

        window.addEventListener('load', scaleContainer);
        window.addEventListener('resize', scaleContainer);
        window.addEventListener('orientationchange', function() {
            setTimeout(scaleContainer, 200);
        });

        // 2. DECORATION
        function createDecorations() {
            const layer = document.getElementById('decor-layer');
            const colors = ['#FF6F61', '#FFD93D', '#6CC5D6', '#FFFFFF'];
            for(let i=0; i<20; i++) {
                const el = document.createElement('div');
                el.classList.add('floating-shape');
                const size = Math.random() * 50 + 20;
                const left = Math.random() * 1920;
                const duration = Math.random() * 10 + 5;
                const delay = Math.random() * 5;
                const color = colors[Math.floor(Math.random() * colors.length)];
                el.style.width = size + 'px'; el.style.height = size + 'px';
                el.style.left = left + 'px'; el.style.backgroundColor = color;
                el.style.animationDuration = duration + 's'; el.style.animationDelay = '-' + delay + 's';
                if(Math.random() > 0.5) el.style.borderRadius = '50%'; else el.style.transform = 'rotate(45deg)';
                layer.appendChild(el);
            }
        }
        createDecorations();

        /* =========================================
        TOUCH SUPPORT (DIPERBAIKI DENGAN SKALA)
        ========================================= */

        function initTouchDrag() {
            const draggables = document.querySelectorAll('.draggable-item');
            let startX, startY;
            let draggedEl = null;

            draggables.forEach(el => {
                el.addEventListener('touchstart', handleTouchStart, {passive: false});
                el.addEventListener('touchmove', handleTouchMove, {passive: false});
                el.addEventListener('touchend', handleTouchEnd);
            });

            function handleTouchStart(e) {
                e.preventDefault();
                draggedEl = e.target;
                
                const touch = e.touches[0];
                startX = touch.clientX;
                startY = touch.clientY;
                
                draggedEl.style.zIndex = 1000;
                // Hapus scale(1.2) di sini jika ingin gerakan lebih akurat, 
                // atau biarkan untuk efek visual "diangkat".
                draggedEl.style.transform = 'scale(1.2)'; 
                draggedEl.style.opacity = '0.8';
            }

            function handleTouchMove(e) {
                if (!draggedEl) return;
                e.preventDefault();
                
                const touch = e.touches[0];
                
                // --- PERBAIKAN UTAMA DI SINI ---
                
                // 1. Ambil elemen wadah utama
                const container = document.getElementById('game-container');
                
                // 2. Hitung SKALA saat ini (Lebar Tampil di Layar / Lebar Asli 1920)
                // Ini akan mendapatkan angka misal 0.5 jika layar tablet setengah dari 1920px
                const currentScale = container.getBoundingClientRect().width / 1920; 

                // 3. Hitung Jarak Geser (Delta)
                // Rumus: Jarak Jari dibagi Skala = Jarak Game
                const dx = (touch.clientX - startX) / currentScale;
                const dy = (touch.clientY - startY) / currentScale;

                // 4. Terapkan
                draggedEl.style.transform = `translate(${dx}px, ${dy}px) scale(1.2)`;
            }

            function handleTouchEnd(e) {
                if (!draggedEl) return;
                
                // Sembunyikan sebentar untuk melihat apa yang ada di bawahnya
                draggedEl.style.display = 'none';
                const touch = e.changedTouches[0];
                const elemBelow = document.elementFromPoint(touch.clientX, touch.clientY);
                draggedEl.style.display = 'block';

                const dropZone = elemBelow ? elemBelow.closest('.drop-zone') : null;

                if (dropZone) {
                    const targetType = dropZone.dataset.target; 
                    const itemType = draggedEl.dataset.type;    

                    if (targetType === itemType) {
                        // BENAR
                        dropZone.appendChild(draggedEl);
                        placedItems++; // Pastikan variabel placedItems ada di scope global
                        
                        // Reset Style
                        draggedEl.style.transform = 'none';
                        draggedEl.style.zIndex = '';
                        draggedEl.style.opacity = '1';
                        
                        if (placedItems >= 6) {
                            const winMsg = document.getElementById('win-message');
                            if(winMsg) winMsg.classList.remove('hidden');
                        }
                    } else {
                        // SALAH
                        alert("Kurang tepat!");
                        resetPosition(draggedEl);
                    }
                } else {
                    // TIDAK KENA ZONA
                    resetPosition(draggedEl);
                }

                draggedEl = null;
            }

            function resetPosition(el) {
                el.style.transition = "transform 0.3s";
                el.style.transform = "translate(0px, 0px)";
                el.style.zIndex = '';
                el.style.opacity = '1';
                setTimeout(() => { el.style.transition = ""; }, 300);
            }
        }

        // 3. PAGE SWITCHING LOGIC (UPDATE: AUTO RESET ASESMEN)
        function switchPage(pageName) {
            const footer = document.querySelector('.footer-info');
            const container = document.getElementById('game-container');
            
            const pages = {
                cover: document.getElementById('view-cover'),
                menu: document.getElementById('view-menu'),
                tujuan: document.getElementById('view-tujuan'),
                materi: document.getElementById('view-materi'),
                video: document.getElementById('view-video'),
                gameMenu: document.getElementById('view-game-menu'),
                gameDrag: document.getElementById('view-game-drag'),
                gameRain: document.getElementById('view-game-rain'),
                gameSeek: document.getElementById('view-game-seek'),
                gameDuel: document.getElementById('view-game-duel'),
                asesmen: document.getElementById('view-asesmen'),
                dev: document.getElementById('view-dev')
            };

            // Reset Video & Game State
            const videoEl = document.getElementById('mainVideo');
            if(videoEl) { videoEl.pause(); videoEl.currentTime = 0; }
            
            if(pageName !== 'game-rain') { isGameRunning = false; clearInterval(spawnInterval); }
            if(pageName !== 'game-duel') { isDuelRunning = false; clearInterval(duelSpawnInterval); }

            // Atur Footer
            if(pageName === 'game-duel' || pageName === 'game-rain'|| pageName === 'asesmen') {
                if(footer) footer.style.display = 'none'; 
            } else {
                if(footer) footer.style.display = ''; 
            }

            // Sembunyikan Semua Halaman
            Object.values(pages).forEach(el => { if(el) el.classList.add('hidden'); });

            // --- LOGIKA PERPINDAHAN HALAMAN ---

            if (pageName === 'cover') {
                pages.cover.classList.remove('hidden');
                container.style.background = "url('assets/Background Cover.png') no-repeat center center / 100% 100%";

            } else if (pageName === 'menu') {
                pages.menu.classList.remove('hidden');
                container.style.background = "url('assets/Background Menu.png') no-repeat center center / 100% 100%";

            } else if (pageName === 'tujuan') {
                pages.tujuan.classList.remove('hidden');
                container.style.background = "url('assets/Background Tujuan Pembelajaran.png') no-repeat center center / 100% 100%";

            } else if (pageName === 'materi') {
                pages.materi.classList.remove('hidden');
                container.style.background = "url('assets/Background Materi.png') no-repeat center center / 100% 100%";
                currentMateriSlide = 1;
                showMateriSlide(1);

            } else if (pageName === 'video') {
                pages.video.classList.remove('hidden');
                container.style.background = "url('assets/Background Video.png') no-repeat center center / 100% 100%";

            } else if (pageName === 'game-menu') {
                pages.gameMenu.classList.remove('hidden');
                container.style.background = "url('assets/Background Menu Game.png') no-repeat center center / 100% 100%";

            } else if (pageName === 'game-drag') {
                pages.gameDrag.classList.remove('hidden');
                container.style.background = "url('assets/backgrounddraganddrop.png') no-repeat center center / 100% 100%";
                resetGame();initTouchDrag();

            } else if (pageName === 'game-rain') {
                pages.gameRain.classList.remove('hidden');
                container.style.background = "url('assets/Background Gamerain.png') no-repeat center center / 100% 100%";
                document.getElementById('start-rain-overlay').classList.remove('hidden');

            } else if (pageName === 'game-seek') {
                pages.gameSeek.classList.remove('hidden');
                container.style.background = "url('assets/Hidden Background.png') no-repeat center center / 100% 100%";                
                resetSeekGame();

            } else if (pageName === 'game-duel') {
                document.getElementById('view-game-duel').classList.remove('hidden');
                document.getElementById('view-game-duel').style.backgroundSize = "100% 100%";
                startDuelGame();
            
            } else if (pageName === 'asesmen') {
                pages.asesmen.classList.remove('hidden');
                container.style.background = "url('assets/backgrounddraganddrop.png') no-repeat center center / 100% 100%";
                resetAsesmen(); 
            
            } else if (pageName === 'dev') {
                pages.dev.classList.remove('hidden');
                switchDevSlide(1); 
            }
        }

        // --- LOGIKA HALAMAN PENGEMBANG ---
        function switchDevSlide(slideNum) {
            const slide1 = document.getElementById('dev-slide-1');
            const slide2 = document.getElementById('dev-slide-2');
            const container = document.getElementById('game-container');

            // Sembunyikan semua dulu
            slide1.classList.add('hidden');
            slide2.classList.add('hidden');

            if (slideNum === 1) {
                // Tampilkan Kredit (Background Putih Kertas)
                slide1.classList.remove('hidden');
                container.style.background = "#FFFFFF"; 
            } else if (slideNum === 2) {
                // Tampilkan Profil (Background Gambar)
                slide2.classList.remove('hidden');
                // Pastikan Anda memasukkan file 'Background Pengembang.png' ke folder assets
                container.style.background = "url('assets/Background Pengembang.png') no-repeat center center / 100% 100%";
            }
        }

        function showFeedback(isCorrect, title, message) {
            const modal = document.getElementById('feedback-modal');
            const icon = document.getElementById('fb-icon');
            const titleElem = document.getElementById('fb-title');
            const msgElem = document.getElementById('fb-message');
            
            modal.classList.remove('hidden');
            titleElem.innerText = title;
            msgElem.innerText = message;
            
            if (isCorrect) {
                icon.innerText = "‚úÖ";
                titleElem.style.color = "#2ecc71";
            } else {
                icon.innerText = "‚ùå";
                titleElem.style.color = "#e74c3c";
            }
        }

        function closeFeedback() {
            document.getElementById('feedback-modal').classList.add('hidden');
        }
        
        // --- LOGIC SLIDESHOW MATERI ---
        let currentMateriSlide = 1;

        function changeMateriSlide(n) {
            showMateriSlide(currentMateriSlide += n);
        }

        function showMateriSlide(n) {
            const slides = document.querySelectorAll('.materi-slide');
            if (n > slides.length) { currentMateriSlide = 1 }
            if (n < 1) { currentMateriSlide = slides.length }

            slides.forEach(slide => slide.classList.remove('active'));
            document.getElementById('slide-' + currentMateriSlide).classList.add('active');
        }

        // --- GAME LOGIC 1: DRAG ---
        let placedItems = 0; const totalItems = 12;
        function allowDrop(ev) { ev.preventDefault(); ev.currentTarget.classList.add('dragover'); }
        document.querySelectorAll('.drop-zone').forEach(zone => { zone.addEventListener('dragleave', () => zone.classList.remove('dragover')); });
        function drag(ev) { ev.dataTransfer.setData("text", ev.target.id); ev.dataTransfer.setData("type", ev.target.dataset.type); }
        function drop(ev) {
            ev.preventDefault(); ev.currentTarget.classList.remove('dragover');
            const dataID = ev.dataTransfer.getData("text"); const dataType = ev.dataTransfer.getData("type"); const targetType = ev.currentTarget.dataset.target;
            if (dataType === targetType) {
                const draggedElement = document.getElementById(dataID); ev.currentTarget.appendChild(draggedElement);
                draggedElement.setAttribute('draggable', 'false'); draggedElement.style.cursor = 'default';
                placedItems++; checkWin();
            } else { alert("Ups! Salah üòä"); }
        }
        function checkWin() { if (placedItems === totalItems) setTimeout(() => { document.getElementById('win-message').classList.remove('hidden'); }, 500); }
        function resetGame() {
            placedItems = 0; document.getElementById('win-message').classList.add('hidden');
            const tray = document.getElementById('item-tray');
            ['item1', 'item2', 'item3', 'item4', 'item5', 'item6', 'item7', 'item8', 'item9', 'item10', 'item11', 'item12'].forEach(id => {
                const el = document.getElementById(id);
                if(el) { tray.appendChild(el); el.setAttribute('draggable', 'true'); el.style.cursor = 'grab'; }
            });
        }

        // --- GAME LOGIC 2: RAIN ---
        let gameRainInterval, spawnInterval, scoreRain = 0, lifeRain = 3, isGameRunning = false;
        
        function moveBasket(clientX) {
            if (!isGameRunning) return;
            let xPosPercent = (clientX / window.innerWidth) * 100;
            if (xPosPercent < 5) xPosPercent = 5; if (xPosPercent > 95) xPosPercent = 95;
            document.getElementById('player-bucket').style.left = xPosPercent + '%';
        }
        window.addEventListener('mousemove', (e) => { moveBasket(e.clientX); });
        window.addEventListener('touchmove', (e) => { moveBasket(e.touches[0].clientX); }, {passive: false});

        function startGameRain() {
            document.getElementById('game-container').style.background = "url('assets/Background Gamerain.png') no-repeat center center / 100% 100%";
            scoreRain = 0; lifeRain = 3; isGameRunning = true;
            document.getElementById('score-rain').innerText = scoreRain + "/100"; 
            document.getElementById('life-rain').innerText = lifeRain;
            
            const title = document.getElementById('end-title');
            if(title) { title.innerText = "PERMAINAN SELESAI"; title.style.color = "#FF6F61"; }

            document.getElementById('start-rain-overlay').classList.add('hidden'); 
            document.getElementById('game-over-screen').classList.add('hidden');
            document.querySelectorAll('.falling-item').forEach(item => item.remove());
            
            clearInterval(spawnInterval); 
            cancelAnimationFrame(gameRainInterval);

            spawnInterval = setInterval(spawnItem, 1200); 
            gameRainInterval = requestAnimationFrame(gameLoop);
        }

        function spawnItem() {
            if (!isGameRunning) return;
            const area = document.getElementById('rain-area');
            const item = document.createElement('img'); 
            item.classList.add('falling-item');
            
            const type = Math.random() > 0.5 ? 'beraturan' : 'tak-beraturan';
            item.dataset.type = type; 
            
            if (type === 'beraturan') {
                const images = ['assets/persegi.png', 'assets/segitiga.png', 'assets/jamdinding.png', 'assets/uangkoin.png', 'assets/lingkaran.png'];
                item.src = images[Math.floor(Math.random() * images.length)];
            } else {
                const images = ['assets/pohon.png', 'assets/daun.png', 'assets/awan.png', 'assets/batu.png', 'assets/sepatu.png'];
                item.src = images[Math.floor(Math.random() * images.length)];
            }
            
            item.style.left = (Math.random() * 90) + '%'; item.style.top = '-100px';
            area.appendChild(item);
            let topPos = -100; const fallSpeed = 4 + Math.random() * 3; 

            function fall() {
                if (!isGameRunning) return;
                topPos += fallSpeed; item.style.top = topPos + 'px';
                
                if (checkCollision(item)) {
                    if (item.dataset.type === 'tak-beraturan') { 
                        scoreRain += 10; document.getElementById('score-rain').innerText = scoreRain + "/100";
                        if (scoreRain >= 100) gameWinRain();
                    } else { reduceLife(); }
                    item.remove(); return;
                }
                if (topPos > 1080) { 
                    if (item.dataset.type === 'tak-beraturan') { reduceLife(); }
                    item.remove(); return; 
                }
                requestAnimationFrame(fall);
            }
            fall();
        }

        function reduceLife() {
            lifeRain--; document.getElementById('life-rain').innerText = lifeRain;
            const container = document.getElementById('game-container');
            container.style.background = 'red';
            setTimeout(() => { 
                if(isGameRunning) container.style.background = "url('assets/Background Gamerain.png') no-repeat center center / 100% 100%"; 
            }, 200);
            if(lifeRain <= 0) gameOver();
        }

        function checkCollision(item) {
            const player = document.getElementById('player-bucket'); 
            const pRect = player.getBoundingClientRect(); const iRect = item.getBoundingClientRect();
            return !(pRect.right < iRect.left || pRect.left > iRect.right || pRect.bottom < iRect.top || pRect.top > iRect.bottom);
        }
        function gameLoop() { if (!isGameRunning) return; requestAnimationFrame(gameLoop); }
        
        function gameOver() {
            isGameRunning = false; clearInterval(spawnInterval); cancelAnimationFrame(gameRainInterval);
            const title = document.getElementById('end-title');
            title.innerText = "YAAH.. GAGAL üò¢"; title.style.color = "#FF6F61";
            document.getElementById('final-score').innerText = scoreRain; 
            document.getElementById('game-over-screen').classList.remove('hidden');
        }

        function gameWinRain() {
            isGameRunning = false; clearInterval(spawnInterval); cancelAnimationFrame(gameRainInterval);
            const title = document.getElementById('end-title');
            title.innerText = "HEBAT! MENANG! üéâ"; title.style.color = "#2ECC71";
            document.getElementById('final-score').innerText = "100"; 
            document.getElementById('game-over-screen').classList.remove('hidden');
        }

        // --- GAME LOGIC 3: SEEK ---
        let seekCount = 0;
        function foundHitbox(element, name) {
            if (element.classList.contains('found')) return;
            element.classList.add('found');
            
            const label = document.getElementById('found-label'); 
            label.innerText = name; label.style.display = 'block';

            seekCount++; document.getElementById('seek-count').innerText = seekCount;
            setTimeout(() => {
                label.style.display = 'none';
                if(seekCount >= 5) document.getElementById('seek-win-message').classList.remove('hidden');
            }, 1500);
        }

        function resetSeekGame() {
            seekCount = 0; document.getElementById('seek-count').innerText = '0';
            document.getElementById('seek-win-message').classList.add('hidden');
            document.querySelectorAll('.hitbox').forEach(item => { item.classList.remove('found'); });
        }

        /* ===========================
        GAME 4: DUEL SHOOTER (FIXED PERCENTAGE)
        =========================== */

        let duelInterval, duelSpawnInterval, duelTimerInterval; 
        let p1FireInterval, p2FireInterval; 
        let p1Score = 0, p2Score = 0;
        let duelTime = 60; 
        let isDuelRunning = false;
        let p1Frozen = false, p2Frozen = false;
        let p1Pos = 25; let p2Pos = 75;
        let duelHandlers = {};

        function startDuelGame() {
            isDuelRunning = true; p1Score = 0; p2Score = 0; duelTime = 60;
            updateDuelScore(); document.getElementById('duel-timer').innerText = duelTime; 
            p1Frozen = false; p2Frozen = false;
            
            const c1 = document.getElementById('cannon-p1'); const c2 = document.getElementById('cannon-p2');
            c1.classList.remove('frozen'); c2.classList.remove('frozen');
            p1Pos = 25; p2Pos = 75;
            c1.style.left = '25%'; c2.style.left = '75%'; // Reset posisi visual
            
            document.getElementById('duel-win-screen').classList.add('hidden');
            document.getElementById('duel-area').innerHTML = ''; // Bersih total

            setupDuelControls();
            // duelLoop visual tidak terlalu dibutuhkan untuk logic setInterval, tapi kita biarkan kalau mau nambah efek
            duelInterval = requestAnimationFrame(duelLoop); 
            
            // Spawn item setiap 1.5 detik
            duelSpawnInterval = setInterval(spawnDuelItem, 1500);
            
            clearInterval(duelTimerInterval);
            duelTimerInterval = setInterval(handleDuelTimer, 1000); 
            startAutoFireP1(); startAutoFireP2();
        }

        function handleDuelTimer() {
            if (!isDuelRunning) return;
            duelTime--; document.getElementById('duel-timer').innerText = duelTime;
            if (duelTime <= 0) finishDuelGame('time-up');
        }

        function checkDuelWin() {
            if (p1Score >= 100 || p2Score >= 100) finishDuelGame('score-limit');
        }

        function finishDuelGame(reason) {
            isDuelRunning = false; stopAutoFire(); 
            clearInterval(duelSpawnInterval); clearInterval(duelTimerInterval); 
            cancelAnimationFrame(duelInterval); removeDuelControls();
            
            // Hapus sisa interval bullet/item yang masih jalan
            document.querySelectorAll('.bullet, .duel-item').forEach(el => {
                if(el.dataset.intervalId) clearInterval(el.dataset.intervalId);
                el.remove();
            });

            const winScreen = document.getElementById('duel-win-screen');
            const winText = document.getElementById('duel-winner-text');
            winScreen.classList.remove('hidden');
            
            let winner = '';
            if (p1Score > p2Score) { winner = "PEMAIN 1 (BIRU) MENANG! üèÜ"; winText.style.color = "#3498db"; } 
            else if (p2Score > p1Score) { winner = "PEMAIN 2 (MERAH) MENANG! üèÜ"; winText.style.color = "#e74c3c"; } 
            else { winner = "SERI! SAMA KUAT! ü§ù"; winText.style.color = "#FFD93D"; }

            if (reason === 'score-limit') winText.innerHTML = winner + "<br><span style='font-size:3rem'>Mencapai 100 Poin!</span>";
            else winText.innerHTML = winner + "<br><span style='font-size:3rem'>Waktu Habis!</span>";
        }

        function startAutoFireP1() { clearInterval(p1FireInterval); p1FireInterval = setInterval(() => { if (isDuelRunning && !p1Frozen) createBullet('p1'); }, 400); }
        function startAutoFireP2() { clearInterval(p2FireInterval); p2FireInterval = setInterval(() => { if (isDuelRunning && !p2Frozen) createBullet('p2'); }, 400); }
        function stopAutoFire() { clearInterval(p1FireInterval); clearInterval(p2FireInterval); }

        function setupDuelControls() {
            removeDuelControls();
            const gameArea = document.getElementById('view-game-duel');
            duelHandlers.move = (e) => { if (e.cancelable) e.preventDefault(); handleDuelMove(e); };
            // Tambahkan event listener ke container utama
            gameArea.addEventListener('touchstart', duelHandlers.move, { passive: false });
            gameArea.addEventListener('touchmove', duelHandlers.move, { passive: false });
            window.addEventListener('mousemove', (e) => { // Gunakan window untuk mouse agar lebih smooth
                if(!isDuelRunning) return;
                const clientX = e.clientX;
                if (clientX < window.innerWidth / 2) moveP1(clientX); else moveP2(clientX);
            });
        }

        function removeDuelControls() {
            const gameArea = document.getElementById('view-game-duel');
            if(duelHandlers.move) { 
                gameArea.removeEventListener('touchstart', duelHandlers.move); 
                gameArea.removeEventListener('touchmove', duelHandlers.move); 
            }
            // Note: window mousemove sulit diremove spesifik tanpa named function di scope luar, tapi ok untuk logic ini
        }

        function handleDuelMove(e) {
            if (!isDuelRunning) return;
            let touches = e.touches; 
            for (let i = 0; i < touches.length; i++) {
                const clientX = touches[i].clientX;
                if (clientX < window.innerWidth / 2) moveP1(clientX); else moveP2(clientX);
            }
        }

        function moveP1(clientX) {
            if (p1Frozen) return; 
            // Logic kontrol tetap pakai window width tidak masalah
            let percent = (clientX / window.innerWidth) * 100; percent = Math.max(5, Math.min(45, percent)); 
            p1Pos = percent; document.getElementById('cannon-p1').style.left = percent + '%';
        }

        function moveP2(clientX) {
            if (p2Frozen) return;
            let percent = (clientX / window.innerWidth) * 100; percent = Math.max(55, Math.min(95, percent)); 
            p2Pos = percent; document.getElementById('cannon-p2').style.left = percent + '%';
        }

        /* --- BAGIAN YANG DIUBAH KE PERSEN (AGAR TIDAK MEMANTUL DI TENGAH) --- */

        function createBullet(player) {
            const area = document.getElementById('duel-area');
            const bullet = document.createElement('div');
            bullet.className = `bullet bullet-${player}`;
            
            // Posisi Horizontal (%)
            let currentPercent = (player === 'p1') ? p1Pos : p2Pos;
            bullet.style.left = currentPercent + '%';
            
            // Posisi Vertikal (Mulai dari 12% bawah)
            let bulletBottom = 12; 
            bullet.style.bottom = bulletBottom + '%'; 
            
            area.appendChild(bullet);

            // Gerakan Bullet (Naik ke atas pakai %)
            bullet.dataset.intervalId = setInterval(() => {
                if(!isDuelRunning) { clearInterval(bullet.dataset.intervalId); bullet.remove(); return; }
                
                bulletBottom += 1.5; // Kecepatan naik 1.5% per tick
                bullet.style.bottom = bulletBottom + '%';
                
                // Deteksi Tabrakan
                const items = document.querySelectorAll('.duel-item');
                items.forEach(item => {
                    if (isColliding(bullet, item)) { 
                        handleHit(player, item); 
                        clearInterval(bullet.dataset.intervalId); 
                        bullet.remove(); 
                    }
                });

                // Hapus jika lewat atas layar
                if (bulletBottom > 100) { clearInterval(bullet.dataset.intervalId); bullet.remove(); }
            }, 20);
        }

        function handleHit(player, item) {
            const type = item.dataset.type;
            let correct = false;
            if (player === 'p1' && type === 'beraturan') correct = true;
            if (player === 'p2' && type === 'tak-beraturan') correct = true; // Perbaikan nama tipe data
            
            if (correct) {
                if(player === 'p1') p1Score+=10; else p2Score+=10; // Tambah poin lebih besar biar seru
                // Efek Ledakan
                item.style.transform = "scale(1.5)"; item.style.opacity = "0";
                if(item.dataset.intervalId) clearInterval(item.dataset.intervalId); // Stop gerakan item
                setTimeout(() => item.remove(), 200);
                updateDuelScore(); checkDuelWin();
            } else { 
                freezePlayer(player); 
                // Item tetap jalan kalau salah tembak (opsional, atau mau dihapus juga boleh)
            }
        }

        function freezePlayer(player) {
            const cannon = document.getElementById(`cannon-${player}`); 
            cannon.classList.add('frozen');
            
            if(player === 'p1') { p1Frozen = true; p1Score = Math.max(0, p1Score - 5); clearInterval(p1FireInterval); } 
            else { p2Frozen = true; p2Score = Math.max(0, p2Score - 5); clearInterval(p2FireInterval); }
            
            updateDuelScore();
            setTimeout(() => {
                cannon.classList.remove('frozen');
                if(player === 'p1') { p1Frozen = false; startAutoFireP1(); } else { p2Frozen = false; startAutoFireP2(); }
            }, 1000); 
        }

        function updateDuelScore() { document.getElementById('d-score1').innerText = "P1: " + p1Score; document.getElementById('d-score2').innerText = "P2: " + p2Score; }
        function duelLoop() { if(isDuelRunning) requestAnimationFrame(duelLoop); }

        // Fungsi Tabrakan (Tetap pakai getBoundingClientRect karena paling akurat)
        function isColliding(a, b) { 
            const r1 = a.getBoundingClientRect(); 
            const r2 = b.getBoundingClientRect(); 
            return !(r1.right < r2.left || r1.left > r2.right || r1.bottom < r2.top || r1.top > r2.bottom); 
        }

        function spawnDuelItem() {
            if (!isDuelRunning) return;
            const area = document.getElementById('duel-area');
            const item = document.createElement('img');
            item.className = 'duel-item';
            
            const type = Math.random() > 0.5 ? 'beraturan' : 'tak-beraturan';
            item.dataset.type = type;
            
            if (type === 'beraturan') { 
                const imgs = ['assets/persegi.png', 'assets/segitiga.png', 'assets/lingkaran.png']; 
                item.src = imgs[Math.floor(Math.random() * imgs.length)]; 
            } else { 
                const imgs = ['assets/pohon.png', 'assets/awan.png', 'assets/daun.png']; 
                item.src = imgs[Math.floor(Math.random() * imgs.length)]; 
            }
            
            // --- PERBAIKAN UTAMA DI SINI ---
            // Ubah Posisi X dan Kecepatan menjadi PERSEN (%)
            // Spawn di antara 5% sampai 90% lebar layar
            let posX = Math.random() * 85 + 5; 
            let posY = -15; // Mulai di atas layar (-15%)
            
            // Kecepatan Horizontal (Persen per tick)
            let speedX = (Math.random() - 0.5) * 0.4; 
            // Kecepatan Vertikal (Persen per tick)
            let speedY = 0.3 + Math.random() * 0.3;     
            
            item.style.left = posX + '%'; 
            item.style.top = posY + '%'; 
            area.appendChild(item);

            item.dataset.intervalId = setInterval(() => {
                if(!isDuelRunning) { clearInterval(item.dataset.intervalId); item.remove(); return; }
                
                posX += speedX; 
                posY += speedY;
                
                // Pantulan Dinding (Cek 0% dan 95%)
                // HAPUS window.innerWidth di sini
                if (posX <= 0 || posX >= 95) speedX *= -1; 
                
                item.style.left = posX + '%'; 
                item.style.top = posY + '%';
                
                // Hapus jika lewat bawah layar (> 110%)
                // HAPUS window.innerHeight di sini
                if (posY > 110) { clearInterval(item.dataset.intervalId); item.remove(); }
            }, 20);
        }

        // ==========================================
        // SCRIPT ASESMEN (FIXED & FULL)
        // ==========================================

        let userAnswers = {
            step1: [], // Array pasangan {leftEl, rightEl, color}
            step2: [], // Array string kata
            step3: {}  // Object soal {1:'A', ...}
        };

        const keyStep1 = { 'm1': 'Beraturan', 'm2': 'Tak Beraturan', 'm3': 'Beraturan', 'm4': 'Tak Beraturan', 'm5': 'Beraturan' };
        const keyStep2 = ['DAUN', 'API', 'BATU', 'AWAN', 'AIR']; 
        const keyStep3 = { 1:'B', 2:'C', 3:'A', 4:'B', 5:'A' };

        // --- NAVIGASI ---
        function nextAsesmenStep(step) {
            ['asesmen-p1', 'asesmen-p2', 'asesmen-p3', 'asesmen-result'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });

            const page = document.getElementById('asesmen-p' + step) || document.getElementById('asesmen-' + step);
            if(page) page.classList.remove('hidden');

            let w = 0;
            if(step === 1) w = 33; if(step === 2) w = 66; if(step === 3) w = 100;
            document.getElementById('progress-bar').style.width = w + '%';

            for(let i=1; i<=3; i++) {
                document.getElementById('label-step-'+i).style.color = step >= i ? '#d35400' : '#555';
            }

            // Init Game
            const wordGrid = document.getElementById('word-grid');
            if(step === 2 && wordGrid && wordGrid.innerHTML === '') {
                initWordSearchManual();
                // FIX: Paksa tombol lanjut agar tidak ketutup footer
                const btnContainer = document.getElementById('btn-next-wordsearch');
                if(btnContainer) {
                    btnContainer.style.position = 'relative';
                    btnContainer.style.zIndex = '60';
                    btnContainer.style.marginBottom = '150px';
                }
            }
        }

        // ==========================================
        // GAME 1: MATCHING (WARNA)
        // ==========================================
        
        const pairColors = ['#FFCDD2', '#FFF9C4', '#C8E6C9', '#BBDEFB', '#E1BEE7']; 
        let selectedLeftEl = null;

        function handleMatchClick(side, el) {
            if (el.classList.contains('paired')) {
                resetPair(el);
                return;
            }

            if(side === 'left') {
                document.querySelectorAll('#col-left .match-item').forEach(i => {
                    if(!i.classList.contains('paired')) i.classList.remove('selected');
                });
                el.classList.add('selected');
                selectedLeftEl = el;

            } else if (side === 'right') {
                if(!selectedLeftEl) {
                    alert("Pilih gambar di sebelah kiri dulu ya!");
                    return;
                }

                const colorIndex = userAnswers.step1.length % pairColors.length;
                const color = pairColors[colorIndex];

                selectedLeftEl.style.backgroundColor = color;
                selectedLeftEl.style.borderColor = "#555";
                el.style.backgroundColor = color;
                el.style.borderColor = "#555";

                selectedLeftEl.classList.remove('selected');
                selectedLeftEl.classList.add('paired');
                el.classList.add('paired');

                userAnswers.step1.push({
                    leftEl: selectedLeftEl,
                    rightEl: el,
                    color: color
                });

                selectedLeftEl = null;
            }
        }

        function resetPair(clickedEl) {
            if(!confirm("Batalkan pasangan ini?")) return;

            const pairIndex = userAnswers.step1.findIndex(p => p.leftEl === clickedEl || p.rightEl === clickedEl);
            
            if (pairIndex > -1) {
                const pair = userAnswers.step1[pairIndex];
                
                pair.leftEl.style.backgroundColor = ''; 
                pair.leftEl.style.borderColor = '';
                pair.leftEl.classList.remove('paired');
                
                pair.rightEl.style.backgroundColor = '';
                pair.rightEl.style.borderColor = '';
                pair.rightEl.classList.remove('paired');

                userAnswers.step1.splice(pairIndex, 1);
            }
        }

        // ==========================================
        // GAME 2: WORD SEARCH (MANUAL)
        // ==========================================
        const gridLettersManual = [
            'D','A','U','N','X','B','K','L','R','A','I','Z',
            'J','A','M','B','B','A','T','U','O','K','E','X',
            'A','R','U','M','L','A','I','R','K','U','B','L',
            'K','X','Y','Z','X','Y','Z','A','P','I','B','C',
            'M','E','J','A','K','O','T','A','K','A','P','T',
            'A','I','O','K','K','A','W','A','N','O','L','R'
        ];
        let currentSelectIdx = [];
        let savedWordsCount = 0;

        function initWordSearchManual() {
            const grid = document.getElementById('word-grid');
            grid.innerHTML = '';
            currentSelectIdx = [];
            userAnswers.step2 = [];
            savedWordsCount = 0;
            document.getElementById('count-found').innerText = '0';
            
            gridLettersManual.forEach((char, idx) => {
                const div = document.createElement('div');
                div.className = 'grid-letter';
                div.innerText = char;
                div.dataset.idx = idx;
                div.onclick = () => toggleManualLetter(div, idx);
                grid.appendChild(div);
            });
        }

        function toggleManualLetter(el, idx) {
            if(savedWordsCount >= 5) return; 
            if(el.classList.contains('marked')) return;
            
            el.classList.toggle('selected');
            if(el.classList.contains('selected')) {
                currentSelectIdx.push(idx);
            } else {
                currentSelectIdx = currentSelectIdx.filter(i => i !== idx);
            }
        }

        function saveSelectedWord() {
            if(currentSelectIdx.length < 2) {
                alert("Pilih huruf dulu!"); return;
            }
            currentSelectIdx.sort((a,b) => a-b);
            let word = "";
            currentSelectIdx.forEach(idx => {
                word += gridLettersManual[idx];
                const el = document.querySelector(`.grid-letter[data-idx="${idx}"]`);
                el.classList.remove('selected');
                el.classList.add('marked');
            });
            
            userAnswers.step2.push(word);
            currentSelectIdx = []; 
            savedWordsCount++;
            document.getElementById('count-found').innerText = savedWordsCount;
            
            if(savedWordsCount >= 5) {
                document.getElementById('btn-next-wordsearch').classList.remove('hidden');
            }
        }

        function fullResetWordSearch() {
            currentSelectIdx = [];
            userAnswers.step2 = [];
            savedWordsCount = 0;
            document.getElementById('count-found').innerText = '0';
            document.getElementById('btn-next-wordsearch').classList.add('hidden');
            
            const letters = document.querySelectorAll('.grid-letter');
            letters.forEach(l => {
                l.classList.remove('selected', 'marked');
            });
        }

        // ==========================================
        // GAME 3: QUIZ
        // ==========================================
        function selectOption(qNum, answer, btn) {
            const parent = btn.parentElement;
            parent.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            userAnswers.step3[qNum] = answer;
        }

        // ==========================================
        // FINISH & SCORING
        // ==========================================
        function finishAsesmen() {
            ['asesmen-p1', 'asesmen-p2', 'asesmen-p3'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById('asesmen-result').classList.remove('hidden');

            try {
                let totalCorrect = 0;
                const feedbackList = document.getElementById('feedback-list');
                feedbackList.innerHTML = '';

                // Step 1
                let correctLines = 0;
                if(userAnswers.step1 && userAnswers.step1.length > 0) {
                    userAnswers.step1.forEach(pair => {
                        const idKiri = pair.leftEl.dataset.id; 
                        const txtKanan = pair.rightEl.dataset.match;
                        if(idKiri === txtKanan) correctLines++;
                    });
                }
                totalCorrect += correctLines;
                if(correctLines < 5) feedbackList.innerHTML += `<li>‚ö†Ô∏è <b>Menghubungkan:</b> Benar ${correctLines} dari 5.</li><hr>`;

                // Step 2
                let correctWords = 0;
                if(userAnswers.step2 && userAnswers.step2.length > 0) {
                    userAnswers.step2.forEach(word => {
                        if(keyStep2.includes(word)) correctWords++;
                    });
                }
                totalCorrect += correctWords;
                if(correctWords < 5) feedbackList.innerHTML += `<li>‚ö†Ô∏è <b>Cari Kata:</b> Menemukan ${correctWords} kata benar.</li><hr>`;

                // Step 3
                let correctQuiz = 0;
                let wrongQuizNums = [];
                for(let i=1; i<=5; i++) {
                    if(userAnswers.step3[i] === keyStep3[i]) correctQuiz++;
                    else wrongQuizNums.push(i);
                }
                totalCorrect += correctQuiz;
                if(wrongQuizNums.length > 0) feedbackList.innerHTML += `<li>‚ùå <b>Kuis:</b> Salah nomor ${wrongQuizNums.join(', ')}.</li>`;

                const finalScore = Math.round((totalCorrect / 15) * 100);
                document.getElementById('final-score-text').innerText = finalScore;
                
                const perfectMsg = document.getElementById('perfect-msg');
                if(finalScore === 100) {
                    if(perfectMsg) perfectMsg.classList.remove('hidden');
                    feedbackList.style.display = 'none';
                } else {
                    if(perfectMsg) perfectMsg.classList.add('hidden');
                    feedbackList.style.display = 'block';
                }

            } catch (e) {
                console.error(e);
                alert("Terjadi kesalahan saat menghitung nilai.");
            }
        }

        function resetAsesmen() {
            userAnswers = { step1: [], step2: [], step3: {} };
            
            // Reset P1 (Warna)
            document.querySelectorAll('.match-item, .match-item-text').forEach(e => {
                e.classList.remove('selected', 'paired');
                e.style.backgroundColor = '';
                e.style.borderColor = '';
            });
            selectedLeftEl = null;

            // Reset P2
            fullResetWordSearch();

            // Reset P3
            document.querySelectorAll('.options button').forEach(e => e.classList.remove('selected'));
            
            nextAsesmenStep(1);
        }
    </script>
</body>
</html>
